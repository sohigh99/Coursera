<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cycle Billing (R49700/R42565/R42800)</title>
<!--     <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/styles.css"> -->
    <link href='https://fonts.googleapis.com/css?family=Oxygen:400,300,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Lora' rel='stylesheet' type='text/css'>

    <style>
      body {
        font-family: "Segoe UI", Calibri, Arial, Helvetica, sans-serif;
/*        background-color: #FFFAFA;*/
/*        font-size: 14px;*/
      }

      #myBtn {
        display: none;
        position: fixed;
        bottom: 20px;
        right: 30px;
        z-index: 99;
        font-size: 18px;*/
        border: none;
        outline: none;
        background-color: #2F4F4F;
        color: white;
        cursor: pointer;
        padding: 15px;
        border-radius: 4px;
      }

      #myBtn:hover {
        background-color: #555;
      }
        .kmnotebox {
        background-color: #FFFFE0;
        border-left: 10px;
        /*border-style: dotted;*/
      }

      .kmcodeblock {
        background-color: #B0E0E6;
        border-left: 10px;
        margin-left: 2%;
        /*border-style: dotted;*/
      }

      
    </style>

  </head>


<body>
  <header>
    <nav id="header-nav" class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <a href="index.html" class="pull-left visible-md visible-lg">
            <div id="logo-img"></div>
          </a>

          <div class="navbar-brand">
            <a href="../index.html"><h1>Home Page!</h1></a>
          </div>

<!--           <form>
            <input type="button" value="Go back!" onclick="history.back()">
          </form> -->

        </div>

      </div><!-- .container -->
    </nav><!-- #header-nav -->
  </header>

<button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>

<div style="background-color:#2F4F4F;color:white;padding:0px"><h1>Cycle Billing (R49700/R42565/R42800)</h1></div>
<!-- <div style="background-color:lightgrey;padding:30px 30px 2500px">This example demonstrates how to create a "scroll to top" button that becomes visible when the user starts to scroll the page.</div> -->

<script>
// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    document.getElementById("myBtn").style.display = "block";
  } else {
    document.getElementById("myBtn").style.display = "none";
  }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>

</body>


<!-- <h1 class="km"><big><big><a name="subtitle"></a><span style="font-size: large;"><BIG>Caching in EnterpriseOne</BIG></span></big></big></h1> -->
<!-- ================================= Purpose of Document ================================== -->

<table><tr><td width='0'></td><td><A HREF="#PURPOSE">Purpose</A></td></tr></table>
<table><tr><td width='0'></td><td><A HREF="#SCOPE">Scope</A></td></tr></table>
<table><tr><td width='0'></td><td><A HREF="#BODYTEXT">Details</A></td></tr></table>
<table><tr><td width=20>&nbsp;</td><td><a href="#aref_section31"><strong>Fundamental Types of Cycles</strong></a></td></tr></table>
<table><tr><td width=20>&nbsp;</td><td><a href="#aref_section32"><strong>Steps Required for Cycle Billing</strong></a></td></tr></table>
<table><tr><td width=20>&nbsp;</td><td><a href="#aref_section33"><strong>Order Activity Rules</strong></a></td></tr></table>
<table><tr><td width=20>&nbsp;</td><td><a href="#aref_section34"><strong>AAIs for Deferred Journal Entries</strong></a></td></tr></table>
<table><tr><td width=20>&nbsp;</td><td><a href="#aref_section35"><strong>Invoice Cycle Preference</strong></a></td></tr></table>
<table><tr><td width=20>&nbsp;</td><td><a href="#aref_section36"><strong>Invoice Cycle Calculation Rule</strong></a></td></tr></table>
<table><tr><td width=20>&nbsp;</td><td><a href="#aref_section37"><strong>Cycle Billing (R49700)</strong></a></td></tr></table>
<table><tr><td width=20>&nbsp;</td><td><a href="#aref_section38"><strong>Processing Options</strong></a></td></tr></table>
<table><tr><td width=20>&nbsp;</td><td><a href="#aref_section39"><strong>Data Selection</strong></a></td></tr></table>
<table><tr><td width=20>&nbsp;</td><td><a href="#aref_section310"><strong>Results</strong></a></td></tr></table>
<table><tr><td width=20>&nbsp;</td><td><a href="#aref_section311"><strong>Print Invoices (R42565)</strong></a></td></tr></table>
<table><tr><td width=20>&nbsp;</td><td><a href="#aref_section312"><strong>Sales Update (R42800)</strong></a></td></tr></table>
<table><tr><td width=20>&nbsp;</td><td><a href="#aref_section313"><strong>Purge of Sales Order Detail Tag (F49211) file</strong></a></td></tr></table>
<table><tr><td width=20>&nbsp;</td><td><a href="#aref_section314"><strong>Setup Examples</strong></a></td></tr></table>
<table><tr><td width=40>&nbsp;</td><td><a href="#aref_section315">Setup Example: Monthly</a></td></tr></table>
<table><tr><td width=40>&nbsp;</td><td><a href="#aref_section316">Order Example: Monthly</a></td></tr></table>
<table><tr><td width=40>&nbsp;</td><td><a href="#aref_section317">Setup: Weekly Example</a></td></tr></table>
<table><tr><td width=40>&nbsp;</td><td><a href="#aref_section318">Order Example: Consolidated Invoices/Weekly  </a></td></tr></table>
<table><tr><td width=40>&nbsp;</td><td><a href="#aref_section319">Setup Example: Based on Date</a></td></tr></table>
<table><tr><td width=40>&nbsp;</td><td><a href="#aref_section320">Setup Example: Daily</a></td></tr></table>
<table><tr><td width=20>&nbsp;</td><td><a href="#aref_section321"><strong>Frequently Asked Questions</strong></a></td></tr></table>
<hr size=1><p>


<H2 class=km><A NAME="PURPOSE"></A>Purpose</H2>
<p><strong>Overview</strong></p>
<p>The primary purpose of this batch program is to calculate a scheduled invoice date for sales orders.  The scheduled invoice date will determine on which date the Print Invoices (R42565) program will print the invoice.  If the scheduled invoice date is greater than today's date, the Cycle Billing (R49700) program will write deferred journal entries.  A cycle billing version of the Print Invoices (R42565) program will be created, so that invoices will be printed only when the scheduled invoice data is less than or equal to the date specified in the processing options.  The scheduled invoice date field (SIDT) is stored in the Sales Order Detail Tag (F49211) file and is written at the time the Cycle Billing (R49700) program is run.</p>
<H2 class=km><A NAME="SCOPE"></A>Scope</H2>
<p> </p>
<H2 class=km><A NAME="BODYTEXT"></A>Details</H2>
<a name="aref_section31"></a><h3 class="km"><strong>Fundamental Types of Cycles</strong></h3>
<p>There are four fundamental types of cycles available in EnterpriseOne.  </p>
<ol>
<li>Daily cycles. The daily cycle with no day&rsquo;s increment is the default cycle.</li>
<li>Weekly cycles, in which the day of the week invoices are printed can be specified.</li>
<li>Scheduled invoice date cycles, is used to specify the invoice dates by taking the row exit "Sched Inv Date" in the Invoice Calculation form. These cycles include monthly, semi-monthly, and bi-weekly.  Note: This cycle type is different than the scheduled invoice date data item (SIDT) which is used by all cycle billing preferences and is found in the F49211.</li>
<li>Based on date cycles, is used to specify a date associated with the sales order (stored in UDC 42/DN).  <em>Note: This cycle type is different from the based on date data item (BODN) which can be used by all cycle billing preferences.</em></li>
</ol>
<a name="aref_section32"></a><h3 class="km"><strong>Steps Required for Cycle Billing</strong></h3>
<p>Cycle billing requires the following setup:  </p>
<ol>
<li>Order activity rules. Cycle billing is typically run at a status just prior to printing invoices.</li>
<li>AAIs for deferred journal entries.</li>
<li>Invoice Cycle Preference Master (P40315, accessed from P40070 on menu G4231): establish the preference hierarchy, and then create cycles assigned to the combinations of customers, customer groups, items, or items groups which are allowed by the hierarchy.</li>
<li>Invoice Cycle Calculation Rule (P40315, accessed by row exit from within the preference master).</li>
</ol>
<p>After the setup is completed, three batch applications are run for cycle billing:</p>
<ol>
<li>Scheduling Invoice Billing (R49700).  This UBE is commonly referred to as Cycle Billing.</li>
<li>Print Invoices (R42565): Cycle billing version.  To consolidate invoices, use the Invoice Consolidation (ICON) flag in the Customer Billing Instructions.</li>
<li>Sales Update (R42800).</li>
</ol>
<a name="aref_section33"></a><h3 class="km"><strong>Order Activity Rules</strong></h3>
<p>According to the default order activity rules, the Cycle Billing (R49700) program will process orders before the Print Invoices (R42565) program. Set up a cycle billing status in the order activity rules for each relevant order type and line type combination; these typically include stock (S), non-stock (N), direct ship (D) and freight (F). The default cycle billing status is 578. Note that all lines on the order should be set to this status, even if the lines do not have preferences for cycle billing.  The Cycle Billing (R49700) program will update the status on all lines, regardless of whether there is preference.  A typical next status would be 580, Print Invoices.<br /> <br /> For example, for a stock item, the next status after Shipment Confirmation (P4205) will be set to 578.<br /> <br /> <img src="../images/p15001.png" border="1" hspace="0"/><br /> <br /> Alternatively, for testing purposes, 578 can be added to the order activity rules as an Other Allowed status after ship confirm.  Then, the override status can be set behind the version of P4205, so that the stock lines will have a next status of 578.<br /> <br /> <img src="../images/p15002.png" border="1" hspace="0"/><br /> <br /> For a non-stock item, typical order activity rules are shown below. <br /> <br /> <img src="../images/p15003.png" border="1" hspace="0"/><br /> <br /> If the alternative order activity rules for non-stock lines are used as shown below, the next status of 578 would be set as the override next status in the processing options at sales order entry.<br /> <br /> <img src="../images/p15004.png" border="1" hspace="0"/></p>
<a name="aref_section34"></a><h3 class="km"><strong><a name="AAIs"></a>AAIs for Deferred Journal Entries</strong></h3>
<p>When the scheduled invoice date is greater than today&rsquo;s date, deferred entries will be created by the Cycle Billing (R49700) program. These entries are necessary to account for the liabilities that are created when goods or services are sold, but the customer will be billed at a future date.  The sales orders will be invoiced and run through Sales Update (R42800) on that future date. The entries booked to Deferred COGS, Deferred Revenue and Unbilled A/R at cycle billing will be reversed by sales update to the appropriate non-deferred accounts, COGS, Revenue and A/R. <br /> <br /> Because deferred entries are only created if the scheduled invoice date is greater than today's date, an invoice cycle of Daily (with number of days to increment set to zero) will never create any deferred entries. A Based on date may also not create deferred entries if the based on date (e.g., order date) is less than or equal to today's date and if the number of days to increment is set to zero. However, an invoice cycle of daily type or based on date type can write deferred entries if number of days to increment is greater than zero. It is not possible to turn off writing one of the Deferred/Unbilled AAI entries.<br /> <br /> The following AAIs must be setup in order to create deferred entries for stock items:</p>
<div style="margin-left: 40px;">4221 &ndash; Deferred COGS<br /> 4231 &ndash; Deferred Revenue<br /> 4232 &ndash; Unbilled A/R</div>
<p><br /> The inventory AAI (4240) will also be written to when stock lines are processed through the Cycle Billing (R49700) program. <br /> <br /> Sample journal entries written by the Cycle Billing (R49700) program, and Sales Update (R42800), will be shown below in the Example: Monthly Scheduled Invoice Date section.</p>
<a name="aref_section35"></a><h3 class="km"><strong><a name="Preference"></a>Invoice Cycle Preference</strong></h3>
<p>The Invoice Cycle preference is called from P40700 on menu G4231. Invoice Cycle has been assigned a preference type number (PRFR stored in UDC 40/PR) of 15.  The naming convention for preference programs is P403XX, where XX is equal to the preference type number, e.g., P40315 for Invoice Cycle.  To access the P40315 from within the P40700, select the Invoice Cycle row, and choose from the row exits: Profiles, Hierarchy, or Master Revision.<br /> <br /> The purpose of the Invoice Cycle preference is to assign an invoice cycle (INCY stored in UDC 40/CY) based on combinations of customer number, customer group, item number, or item group.  The combinations are defined in the preference hierarchy.  If all customers will use the same invoice cycle for all items, the hierarchy may be set for all customers/all items. Many different invoice cycles can be added as required; for example, multiple weekly preferences can be set up, such as WK1, WK2, WK3, etc.  Choose the "Profiles" row exit to the "Work with . . . ." form.  Click find to see existing preference profiles, or click add to create new preference profiles.<br /> <br /> The data on invoice cycle preferences are stored in the F40315, Preference Profile &ndash; Invoice Cycling Table, and the F49080, Invoice Cycle Calculation Table.  If a Scheduled Invoice Date cycle type is used, the data are stored in the F49085, Scheduled Invoice Date Table.</p>
<a name="aref_section36"></a><h3 class="km"><strong><a name="Rules"></a>Invoice Cycle Calculation Rule</strong></h3>
<p>Once the Invoice Cycle preference is created as described above, select a row and take the row exit to &ldquo;Calc Rule&rdquo;.  The first field in this form is fiscal year (DTEY), and it must be populated with the two digit year in order to create a calculation rule.  Under Date Calculation parameters, the invoice cycle is grayed out; it has been populated based on the row selected when taking the row exit to this form.</p>
<p><img src="../images/p15005.png" class="kmsmartresize" alt="30" title="30" width="542"/><br /> <br /> Within this Invoice Cycle Calculation Rule form, there is a data item which is also called Calculation Rule.  The Calculation Rule data item (CLCD, stored in UDC 42/CR) determines which of the other setup fields must be populated.  Then, the combination of values within the calculation rule will determine the scheduled invoice date.  The matrix below shows the valid field combinations for each of the four fundamental cycle types.  Then, the required fields are described in detail. <br /> <br /> The following table details which fields are required to contain a value, which are optional, and which fields must be blank for each Calculation Rule.  Note that in some cases, fields that should be blank can still be populated; if the fields should be blank, the entered values will be ignored.</p>
<table style="text-align: left; width: 732px; height: 364px;" border="1" cellspacing="2" cellpadding="2">
<tbody>
<tr>
<td style="text-align: center; background-color: red; color: white; width: 172px;"><strong>Calculation Rule (CLCD)</strong></td>
<td style="text-align: center; background-color: red; color: white; width: 91px;"><strong>Number of Days Increment (NODI)</strong></td>
<td style="text-align: center; background-color: red; color: white;"><strong>Day of Week (DOW)</strong></td>
<td style="text-align: center; background-color: red; color: white;"><strong>Based on Date (BODN)</strong></td>
<td style="text-align: center; background-color: red; color: white;"><strong>Schedule Invoice Dates (IVD in Form Exit)</strong></td>
</tr>
<tr>
<td style="width: 172px;">Daily = 1</td>
<td style="width: 91px;">Optional</td>
<td>Blank</td>
<td>Required to be equal to Zero (Does not use based in date)</td>
<td>Ignored</td>
</tr>
<tr>
<td style="width: 172px;">Weekly = 2</td>
<td style="width: 91px;">Ignored</td>
<td>Required</td>
<td>Required to be other than Zero</td>
<td>Ignored</td>
</tr>
<tr>
<td style="width: 172px;"><em>Scheduled Invoice Dates</em><br /> <br /> Bi-weekly = 3<br /> Semi-monthly = 4<br /> Monthly = 5</td>
<td style="width: 91px;">Ignored</td>
<td>Blank</td>
<td>Required to be other than Zero</td>
<td>Required</td>
</tr>
<tr>
<td style="width: 172px;">Based-on-date = 6</td>
<td style="width: 91px;">Optional</td>
<td>Blank</td>
<td>Required to be other than Zero</td>
<td>Ignored</td>
</tr>
</tbody>
</table>
<p><br /> <strong>Number of Days Increment (NODI)</strong> is the number of days added to the Based on Date. This field can be specified for the daily and based-on-date calculation rule types.<br /> <br /> <strong>Based On Date Name (BODN)</strong> field values are stored in UDC table 42/DN that indicates the date name that will be used in the calculation.  The valid values are:  </p>
<div style="margin-left: 40px;">0)    Does not use based on date<br /> 1)    Order/Transaction (TRDJ)<br /> 2)    Requested Delivery (DRQJ)<br /> 3)    Promised Delivery (PDDJ)<br /> 4)    Load Confirm (LDDT)<br /> 5)    Delivery Confirm (DCDT)<br /> 6)    Actual Ship (ADDJ)<br /> 7)    Promised Delivery (PDDJ)<br /> 8)    Promised Ship (PPDJ)</div>
<p><br /> <strong>Day of Week (DOW)</strong> field is a UDC table (42/DW) that indicates on which day of the week the Print Invoice program will produce an invoice for the customer; this field is used for weekly cycles only.<br /> <br /> <strong>Scheduled Invoice Date (IVD)</strong> If using a calculation rule with a Scheduled Invoice Date type, i.e., other than daily, weekly, or based-on-date, the scheduled invoice date (IVD) must be manually assigned. This setup is found by taking the form exit Scheduled Inv Dates from the Invoice Cycle Calculation Rule form. This table requires entry of the effective from (EFTJ) and effective thru (EXDJ) dates, and corresponding invoice date (IVD).  Because a specific invoice date is assigned, the number of day&rsquo;s increment is ignored for these preferences. <br /> <br /> The invoice cycle calculation rule setup can be tested by entering dates in the Test Date fields at the bottom left of the form.  The scheduled invoice date will appear in the corresponding Calc Date box.  See the example below at <strong>Setup Example: Monthly</strong>.<br /> <br /> The invoice cycle calculation rules are stored in the Invoice Cycle Calculation (F49080) table. If using a calculation rule with a scheduled invoice date type, the scheduled invoice dates are stored in the Scheduled Invoice Date (F49085) table.</p>
<a name="aref_section37"></a><h3 class="km"><strong>Cycle Billing (R49700)</strong></h3>
<p>Cycle Billing (R49700) is located on the G42113 menu.  There are two versions of the Cycle Billing (R49700) program, <em>Proof</em> and <em>Final</em>. Oracle recommends that a proof version is run and reviewed before running the final version.</p>
<p><img src="../images/p15006.png" class="kmsmartresize" alt="31" title="31" width="1024"/><br /> <br /> The Cycle Billing (R49700) program writes to the F49211 (Sales Order Detail Tag File).  The Deferred Entries Flag (DEFF), Invoice Cycle (INCY) and Scheduled Invoice Date (SIDT) are populated in the F49211.  If the DEFF flag is populated with a &lsquo;1&rsquo; in the F49211, a corresponding deferred entries flag, SO12*, will have a value of &lsquo;1&rsquo; written to the F4211 file.  This flag is used for data selection in the Print Invoices (R42565) program.</p>
<a name="aref_section38"></a><h3 class="km"><strong><a name="ProcessingOptions"></a>Processing Options</strong></h3>
<p>The first processing option requires that the user enters a valid next status for orders that have already been invoiced. The purpose of this option is to divert orders that have already been invoiced from calculating a scheduled invoice date. If orders are picked up for processing that already have an invoice number in the F4211, they will not be assigned a scheduled invoice date, but they will be assigned a next status as specified in this processing option, e.g., 620. The next status must be a valid status in the order activity rules.    <br /> <br /> The second processing option allows the user to enter an override next status for orders that are processed through cycle billing. Otherwise the next status will be assigned based on the order activity rules.  Typically, the next status would allow the order to be run through the Print Invoice program, e.g., 580. This status must be a valid status in the order activity rules.<br /> <br /> The third processing option allows entry of a version of Sales Update (R42800) that will also be used to run sales update over these orders. The purpose of this processing option is to use the same processing options for the creation of the cycle billing journal entries and the sales update journal entries. Because sales update will reverse any journal entries created during cycle billing, these processing options should be consistent. <br /> <br /> The fourth processing option indicates if this version is a Proof version or a Final version. Journal entries will only be written if run in Final mode. Running in proof mode first will allow users to review G/L entries and make corrections if needed.<br /> <br /> The fifth processing option allows the entry of an invoice cycle. This invoice cycle can act as the default if no invoice cycle preference is found. Typically, this option will be set to Daily and use the Invoice Cycle Preference to calculate the scheduled invoice date for any customer that requires an invoice cycle other than Daily.  However, any other invoice cycle (which is stored in UDC 40/CY and which has been assigned a Calculation Rule, stored in the F49080) can be entered in this processing option as an override for all orders which will be run through this batch.  The orders processed through this batch are based on: 1) the data selection of the version of the Cycle Billing (R49700) program, and 2) the preference hierarchy.  If the invoice cycle is stored in the 40/CY, but no calculation rule has been established for it, this value will populate the INCY field in the F49211, but the DEFF and the SIDT will not be populated, and no deferred entries will be written. <br /> <br /> There is no call to R40400 to turn on the Invoice Cycle Calculation preference as there are with most other preferences. The R40400 is hard coded to always call this preference.</p>
<a name="aref_section39"></a><h3 class="km"><strong>Data Selection</strong></h3>
<p>The data selection is based on Sales Order Header (F4201) and Sales Order Detail (F4211) fields.</p>
<a name="aref_section310"></a><h3 class="km"><strong>Results</strong></h3>
<p>After running the UBE, a report prints that contains any deferred G/L entries written for each order.  If no entries are necessary, i.e., if the scheduled invoice date (SIDT) is less than or equal to today's date (or system date for testing purposes), only a header line for each order selected will print.  If the header of the report prints with no sales order headers or details, then the batch had errors.  Errors for the batch, e.g., AAI errors, will appear in the work center.  When AAI errors occur for any sales order detail line, cycle billing will not create deferred entries for any lines on the sales order.  <br /> <br /> For sales orders with deferred entries, the Deferred Entries Flag (DEFF) will be populated with a &lsquo;Y&rsquo;, and the Invoice Cycle field (INCY) and Scheduled Invoice Date field (SIDT) will also be populated.  When testing cycle billing preferences: check that the SIDT (the scheduled invoice date) and INCY (invoice cycle) in the F49211 were populated as expected based on the calculation rule.<br /> <br /> The order status in the F4211 will be updated to indicate the next step in the order flow. The next status will typically indicate that the order is ready for invoice print, e.g., 580.  <br /> <br /> If the Cycle Billing (R49700) program was run in final mode, a G-batch will be created.  This deferred journal entries can be viewed with the batch number found on the UBE output.<br /> <br /> <em>Note: Some businesses may print invoices one time per week (weekly), Fridays for instance. In this case, the client would define the Invoice Cycle Preference, and specify this cycle in the processing options behind the Cycle Billing (R49700) program.  However, if the client wants to assign different cycles to different customers or customer groups, then the Invoice Cycle Preference must be assigned to customers/customer groups and items/items groups.</em></p>
<a name="aref_section311"></a><h3 class="km"><strong>Print Invoices (R42565)</strong></h3>
<p>XJDE0009 is the default version of Print Invoices for Cycle Billing.  On the Print tab, the first processing option can store a date value.  Any orders with scheduled invoice date (SIDT) less than or equal to this date will be processed, i.e., the statuses will be updated, and invoice numbers assigned.  Orders with future dates will not yet be processed.  If no date is entered in this processing option, the system date will be used.  <br /> <br /> The Print Invoices (R42565) program can print consolidated invoices if the Invoice Consolidation flag (ICON) is activated in the Customer Billing Instructions.<br /> <br /> The invoice date in the processing option can be set to a future date, if there is an exception and an invoice needs to be printed before the scheduled invoice date.  For example, if the SIDT is 05/04/10, and today's date is 05/01/10, the processing option can be changed to 05/04/10, to print the invoice today.  However, the invoice will print with an invoice date of 05/04/10, and the invoice date (IVD field in the F4211) will be populated with 05/04/10.</p>
<a name="aref_section312"></a><h3 class="km"><strong>Sales Update (R42800)</strong></h3>
<p>Sales update should be run with the same processing options as the version that was attached to the Cycle Billing (R49700) program.  Sales update will reverse the deferred journal entries (i.e., written by AAIs 4221, 4231, and 4232) that were written by the Cycle Billing (R49700) program.  If there was no preference for the line, no deferred entries will be written by the Cycle Billing (R49700) program, so no reversals will occur at sales update.  An example of sales update can be found below in <strong>Setup Example: Monthly</strong>.</p>
<a name="aref_section313"></a><h3 class="km"><strong><a name="Purge"></a>Purge of Sales Order Detail Tag (F49211) file</strong></h3>
<p>F49211 will be purged to the F49219 history table, if F4211 records are purged to the F42119 at sales update.</p>
<a name="aref_section314"></a><h3 class="km"><strong>Setup Examples</strong></h3>
<p>The following sections detail examples of the different types of invoice cycles.  Several of the examples include various screen prints of the setup and the output from the Cycle Billing (R49700), Print Invoices (R42565), and Sales Update (R42800) UBEs, as well as the resulting changes to the records in the tables.  The hierarchy used for all examples includes sold to address/ item number, sold to address/all items, and all items/all customers.</p>
<a name="aref_section315"></a><h4 class="km">Setup Example: Monthly</h4>
<p>In the following example, a monthly preference will be used for a sold to address/item number.  <br /> <br /> <img src="../images/p15007.png" border="1" hspace="0"/><br /> <br /> Assume that today is February 23rd. The number of days increment field (NODI) is ignored with scheduled invoice date preferences. The day of the week field (DOW) must be blank. The based-on-date must be populated with a value other than zero, or a receive error (0860) will occur.  In this example, the customer will be invoiced based on actual ship date (ADDJ). Enter in FY = 10 to move to the next screen.  <br /> <br /> <img src="../images/p15008.png" border="1" hspace="0"/><br /> <br /><span>Because monthly preferences are of type Scheduled Invoice Date, Scheduled Invoice Dates must be specified through the row exit "Sched Inv Date". Any invoice date can be specified; for this example, if a customer has ordered stock items that shipped between February 1st and February 26th, the invoice date will be 2/26/18.  </span><br /> <br /> <img src="../images/p15009.png" border="1" hspace="0"/><br /> <br /> Use the Test Date fields at the bottom of the following form to validate the invoice dates. This will only validate the dates are accurate and will not hold the test data once exiting.  <br /> <br /> <img src="../images/p15010.png" border="1" hspace="0"/><br /> <br /> All possible dates for each fiscal year should have an associated invoice date.  In the example below, if the actual ship date is September 18th, no invoice date will be assigned because there is no invoice date specified for this preference. <br /> <br /> <img src="../images/p15011.png" border="1" hspace="0"/></p>
<a name="aref_section316"></a><h4 class="km">Order Example: Monthly</h4>
<p>1. Enter a sales order for the customer (sold to) and item number for a stock line type item.</p>
<p>2. Ship Confirm P4205 the order, ensuring that the next status for confirmed lines is 578.  In this example, one line of the order has an actual ship date (ADDJ) of February 26th, and the other line has an actual ship date of March 5th. <br /> <br /> <img src="../images/p15012.png" border="1" hspace="0"/><br /> <br /> Set up the Cycle Billing (R49700) program and its attached version of the Sales Update (R42800).  Here are the processing options of both UBEs. <br /> <br /> Sales Update (R42800) program: <br /> <br /> <img src="../images/p15013.png" border="1" hspace="0"/><br /> <br /> <img src="../images/p15014.png" border="1" hspace="0"/><br /> <br /> <img src="../images/p15015.png" border="1" hspace="0"/><br /> <br /> Cycle Billing (R49700) program: <br /> <br /> <img src="../images/p15016.png" border="1" hspace="0"/><br /> <br /> The data selection for the Cycle Billing (R49700) program will include the next status equal to 578.  Run the Cycle Billing (R49700) program over the order.  Below is the .pdf output from the Cycle Billing (R49700) program.  Note that both lines created deferred journal entries. <br />  <br /> <img src="../images/p15017.png" border="1" hspace="0"/><br /> <br /> <img src="../images/p15018.png" border="1" hspace="0"/><br /> <br /> Below, the UTB is shown for the F49211 and F4211. When testing, ensure that the DEFF (Deferred Entries Flag) has a &lsquo;1&rsquo; to signify that deferred entries have been written.  SIDT will show the scheduled invoice date calculated by the preference, and INCY will show the invoice cycle used.<br /> <br /> <img src="../images/p15019.png" border="1" hspace="0"/><br /> <br /> In the F4211, note that the SO12 is &lsquo;1&rsquo;, showing that deferred entries were written.  Also, note that the statuses have been updated and are now ready for invoice print. The SIDT, INCY and SO12 show the lines processed. If they are not populated, the order did not process correctly.<br /> <br /> <img src="../images/p15020.png" border="1" hspace="0"/><br /> <br />When the Print Invoices (R42565) program is run tonight, this sales order will not be processed because the SIDTs for the lines on the order are February 26th and March 5th. Run the Print Invoices (R42565) program on February 26th. Below is the .pdf output for the UBE. Only the first line was printed and assigned an invoice number.<br /> <br /> <img src="../images/p15021.png" border="1" hspace="0"/><br /> <br />Since the system date is February 26th, the first line of the order will be processed through sales update. Run sales update, and the .pdf output will show the reversed deferred journal entries and the final journal entries:<br /> <br /> <img src="../images/p15022.png" border="1" hspace="0"/><br /> <br /> Since we have purged the F4211 for lines run through sales update, only one line remains in the F4211 for this order.  This line will not be invoiced and updated until August 30th.</p>
<a name="aref_section317"></a><h4 class="km">Setup: Weekly Example</h4>
<p>The example below demonstrates the setup for a weekly invoice cycle. For this example, assume:</p>
<ol>
<li>A weekly scheduled invoice date, for instance each Monday;</li>
<li>February 23rd  is a Friday; and</li>
<li>Consolidated invoices are printed using Print Invoices (R42565), because this customer has the Invoice Consolidation flag on in the Customer Billing Instructions.</li>
<li>The calculation will be based on the order date (TRDJ).</li>
</ol>
<p>The first step is to setup the Invoice Cycle preference.  In this example, customer will be assigned an invoice cycle of WK1 when the Cycle Billing (R49700) program is run.  For example, cycle billing will calculate a scheduled invoice date of February 26th (Monday) for all orders for customer entered on the 20th through the 26th.  Therefore, when the Print Invoices (R42565) program is run on the 20th, no invoices will print for customer.  On Monday, February 26th, when the Print Invoices (R42565) program is run, all orders entered since the previous Monday will print for customer.  In the above example we are defining the invoice cycle for a weekly invoice cycle. With this rule we will invoice once per week, on Mondays.</p>
<p><img src="../images/p15023.png" border="1" hspace="0"/></p>
<a name="aref_section318"></a><h4 class="km">Order Example: Consolidated Invoices/Weekly  </h4>
<p>Set up the customer with Invoice Consolidation activated in the Customer Billing Instructions.</p>
<p><img src="../images/p15024.png" border="1" hspace="0"/><br /> <br /> <br /> Enter three orders with order dates February 24th, 25th and 26th.  The orders would typically be run through ship confirm to change the next status on each line to 578, and then the Cycle Billing (R49700) program would be run daily.  For testing purposes, we can run all the orders through Cycle Billing (R49700) program in one batch. <br /> <br /> Here is the Cycle Billing (R49700) program .pdf output:<br /> <img src="../images/p15025.png" border="1" hspace="0"/><br /> <img src="../images/p15026.png" border="1" hspace="0"/><br /> <br />Run the Print Invoices (R42565) program on February 26th, and one invoice number will be assigned, as this customer allows invoice consolidation.  The consolidated invoice will print for all of the items, as shown below:<br /> <br /> <img src="../images/p15027.png" border="1" hspace="0"/></p>
<a name="aref_section319"></a><h4 class="km">Setup Example: Based on Date</h4>
<p>The example below demonstrates the setup for all customers for all items.  This calculation may be set up by a business which invoices based on the promised shipment date (PPDJ) + 5 days increment.  For example, cycle billing will calculate a scheduled invoice date of March 3rd for all orders entered which have promised shipment dates of February 26th.  When the Print Invoices (R42565) program is run on the February 26th, no invoices will print for these orders.  The calculation rule will look like this example:</p>
<p><img src="../images/p15028.png" border="1" hspace="0"/></p>
<a name="aref_section320"></a><h4 class="km">Setup Example: Daily</h4>
<p>The daily preference (with no days to increment) will be used as a default if: 1) the system does not find a match in the specified hierarchy, and 2) there is no other override preference specified in the processing option behind the Cycle Billing (R49700) program. In other words, the invoice and sales update will run the same day that the order is entered, which is the same result as if no preferences were used. <br /> <br /> <img src="../images/p15029.png" border="1" hspace="0"/></p>
<a name="aref_section321"></a><h3 class="km"><strong>Frequently Asked Questions</strong></h3>
<p><strong>Question 1: For certain dates, no deferred journal entries are created, why?<br /> <br /> Answer 1:  </strong>One possible cause is that all possible dates for each fiscal year do not have an associated invoice date.  In the example shown below, if the actual ship date is September 18th, no invoice date will be assigned because there is no invoice date specified for that date in this preference.</p>
<p> <img src="../images/p15030.png" border="1" hspace="0"/><br /> <br /> <br /> <br /> <img src="../images/p15031.png" border="1" hspace="0"/><br /> <br /> Also, check that the F49080 and F49085, as well as the preference hierarchy, are populated as expected.  </p>
<hr />
<p><strong>Question 2: If the wrong scheduled invoice date (SIDT) is assigned to a detail line, can the user overwrite the value of the SIDT in the F49211 with a correct value?<br /> <br /> Answer 2: </strong> Although this is not the intended functionality of the Cycle Billing (R49700) program, the statuses on the detail line can be set back manually, so that the Cycle Billing (R49700) program can be rerun over the line to correct the scheduled invoice date.  The original deferred entries batch must be voided manually.</p>
<hr />
<p><strong>Question 3: Where can cycle billing not be used?<br /> <br /> Answer 3:</strong> Cycle billing cannot be used in the follow scenarios:</p>
<ul>
<li>Cycle billing cannot be used for interbranch orders (e.g., SK/OK), although it can be used for the customer order (e.g., SI).</li>
<li>Deferred entries will not be created for advanced pricing type 6 adjustments, since these adjustments do not create new lines in the F4211 or F49211.   </li>
<li>Cycle billing does not use workday calendar.</li>
<li>Orders with prepayments will not create deferred journal entries.</li>
</ul>
<hr />
<p><strong>Question 4: When using R49700 Cycle Billing report with intercompany and flex accounting set on the R42800 Sales Update version, why does the system look at the Detail B/P instead of the Header B/P for the Inventory DMAAI 4240?<br /> <br /> Answer 4: </strong>When processing Cycle Billing for Interbranch &amp; Intercompany orders, a separate version of Sales Update (R42800) needs to be created for use by the Cycle Billing itself. This version needs to have the order type of the Interbranch/Intercompany order that is being processed by Cycle Billing in the Interbranch Order Types PO of R42800. Typically, this is the SI order type.<br /> <br /> The version of R42800 which is to be run at the end of the Sales processing cycle still needs to be setup with the Interbranch Order Types PO as a value of SK.<br /> <br /> When processing Cycle Billing in this way, the correct entries are made using the Header B/P.</p>
<hr />
<p><strong> Question 5: Can Flexible Sales Accounting Be Used With Cycle Billing (R49700)? <br /> <br /> Answer 5: </strong>Yes. Make sure to setup R49700 using the Rule Setup Method in the Enabled Functionality by Application in menu G1631. Make sure AAIs for flex accounting have been setup and accounts are created with the appropriate values on the fields being flexed. The version of R42800 called by R49700 Cycle Billing must have the Flex Accounting Processing Option set to 1.</p>
<hr />
<p><strong> Question 6: When attempting to test R49700 Cycle Billing the job it ends in error that states Fiscal Year Not Set Up. When looking at jdedebug.log the EditDate function is not passing in a date.<br /> <br /> Answer 6: </strong>R42800 Processing Options were set = 1 to use the Sales Invoice Date as the AR Date and GL Date for Cycle Billing deferred entries. The sales invoice date was null on the sales order because invoice print has not been run. The Fiscal Year was not set up for the blank or null sales invoice date passed in from the sales order.<br /> <br /> R49700 calls a version of R42800 to create deferred Journal Entries. In this version of R42800, the AR Date and GL Date must be set to 2 (Actual Ship Date) or 3 (Execute Date) in order for GL deferred entries to get created. If processing options are set to use actual ship date, verify the order has been ship confirmed and the actual ship date is populated.</p>
<hr />
<p><strong><a name="UBEFailed"></a>Question 7: Why does version R42565. ZJDE0009 (or a copy of this version) end in error &ldquo;Retrieve of UBE Failed&rdquo; when attempting to View PDF from Work With Submitted Jobs?</strong></p>
<p><strong>Answer 7:</strong> It is normal to receive this error message, and no PDF output, when running the R42565. ZJDE0009 over an order (that has had the R49700 run over it and where the SIDT date has been assigned) in cases where the current date is less than the SIDT value. For example, if the SIDT date is 8/21, and the R42565 is being run on 8/16, the R42565 will fail. The R42565 will complete correctly on 8/21 or any date after this. </p>
<hr />
<p><strong>Question 8: We ran cycle billing to create deferred revenue entries and subsequently cancelled the sales order lines.  How can we correct the journal entries?</strong></p>
<p><strong>Answer 8: </strong>Deferred revenue entries are created in batch type G transactions. The journal entry can be voided using the Journal Entry application, P0911.  Inquire on the journal entry. Select the record then take the Row exit to Void.  A confirmation screen will appear indicating "Are you sure that you want to void this journal entry? The G/L date field is enabled to allow the user to indicate a date in the current accounting period.</p>
<hr />
<p> </p>






<!-- ======================================== End of Body ==================================== -->

  <footer class="panel-footer">
    <div class="container">
      <div class="row">
        <section id="pagebottom" class="pagebottom">
          <!-- <p>"Click Top button to go back to the top"</p> -->
          <button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
          <form>
            <input type="button" value="Go back!" onclick="history.back()">
          </form>
        </section>
      </div>
      <div class="text-center">&copy; Copyright Dong's Page 2019</div>
    </div>
  </footer>

  <!-- jQuery (Bootstrap JS plugins depend on it) -->
  <script src="../js/jquery-2.1.4.min.js"></script>
  <script src="../js/bootstrap.min.js"></script>
  <script src="../js/script.js"></script>
</body>
</html>
