<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sales Order Detail Cache (F42UI11) </title>
<!--     <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/styles.css"> -->
    <link href='https://fonts.googleapis.com/css?family=Oxygen:400,300,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Lora' rel='stylesheet' type='text/css'>

    <style>
      body {
        font-family: Calibri, Arial, Helvetica, sans-serif;
/*        background-color: #FFFAFA;*/
/*        font-size: 14px;*/
      }

      #myBtn {
        display: none;
        position: fixed;
        bottom: 20px;
        right: 30px;
        z-index: 99;
        font-size: 18px;*/
        border: none;
        outline: none;
        background-color: #FF8C00;
        color: white;
        cursor: pointer;
        padding: 15px;
        border-radius: 4px;
      }

      #myBtn:hover {
        background-color: #555;
      }
    </style>

  </head>


<body>
  <header>
    <nav id="header-nav" class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <a href="index.html" class="pull-left visible-md visible-lg">
            <div id="logo-img"></div>
          </a>

          <div class="navbar-brand">
            <a href="../index.html"><h1>Home Page!</h1></a>
          </div>

<!--           <form>
            <input type="button" value="Go back!" onclick="history.back()">
          </form> -->

        </div>
        
      </div><!-- .container -->
    </nav><!-- #header-nav -->
  </header>

<button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>

<div style="background-color:#2F4F4F;color:white;padding:0px"><h1>BSFN: How to Implement Sales Order Detail Cache (F42UI11) using column SOOR (Source of Order) in P421002 - Case Study</h1></div>
<!-- <div style="background-color:lightgrey;padding:30px 30px 2500px">This example demonstrates how to create a "scroll to top" button that becomes visible when the user starts to scroll the page.</div> -->

<script>
// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    document.getElementById("myBtn").style.display = "block";
  } else {
    document.getElementById("myBtn").style.display = "none";
  }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>

</body>


<!-- <h1 class="km"><big><big><a name="subtitle"></a><span style="font-size: large;"><BIG>Caching in EnterpriseOne</BIG></span></big></big></h1> -->
<!-- ================================= Purpose of Document ================================== -->

<h2 class="km"><big><big><a name="section01"></a><span style="font-size: medium;"><BIG>Purpose of Document</BIG></span></big></big></h2>

<p><strong>THIS IS INTERNAL ONLY DOCUMENT, DO NOT DISTRIBUTE TO CUSTOMER. ORACLE SUPPORT DOES NOT SUPPORT CUSTOMIZATION.</strong></p>
<p>This document is to show example on how sales order application (P4210) makes use of cache (F42UI11) by adding additional column. This is example only and we discourage user from changing any standard functionality.</p>
<p>Before you start to change any standard functionality, check,</p>
<ul>
<li>What's the purpose of populating column SOOR?</li>
<li>Which tables are your target table (header F4201 or detail F4211)?</li>
<li>You can populate it into header (same is true for EDI R47011) but you shall not be able to populate it into detail though sales order detail files (F4211 and F42UI11)</li>
<li>Currently this column is in use for demand scheduling. For instance, source of order = '1' indicates the sales order is being generated by the demand scheduling system (B4206000, B4206010).  The demand system will place an order on hold when the cumulative order quantity has reached or fallen below zero. So possibly you may consider to populate user reserved columns because this won't disrupt any exiting logic.</li>
</ul>


<!-- ======================================== Body Starts Here =================================== -->

<p>Purpose of this document is to explain as-is routine to explain how cache (F42UI11) is handled in sales order master business function. Make it sure that the columns to be added does exist from F42UI11 or F42UI12. In case a certain column is not a member of these sales order detail cache tables, you may need to add it manually and generate table either F42UI11 or F42UI12.<br /> <br /> Note that Oracle shall not bear any responsibility for the outcome you may get and this modification may terminate support agreement for a certain application. <br /> Important: since this change include the change of data structure, full package must be built after finishing test successfully</p>
<h3 class="km">A.    As &ndash; is routine explanation</h3>
<ul>
<li>User populate GC Source of Order</li>
<li>This value gets handed over in calling F4211FSEditLine at Row Is Exited/Changed - Asynch event</li>
<li>lpDS of F4211FSEditLine value assigned to F42UI11.soor (at I4200310_LoadParmsForF42UI11 in B4200311.c)</li>
<li>F42UI11.soor assigned to F4211.soor (at I4200310_LoadF4211ParmsForED in B4200310.c)</li>
</ul>
<h3 class="km"><br /> B.    Object affected</h3>
<ul>
<li>D4200310F &ndash; Data structure for F4211FSEditLine</li>
<li>B4200310.h to indicate change made in data structure of D4200310F</li>
<li>B4200311.c to map data structure value to cache F42UI11</li>
<li>B4200310.c to map cache to table F4211</li>
<li>P4210|W4210A to make BC SOOR to Grid Column</li>
<li>P4210|W4210A event rule to hand over GC Source of Order in calling F4211FSEditLine</li>
</ul>
<p> </p>
<hr />
<h3 class="km"><br /> C.    Step by step implementation</h3>
<h4 class="km">1.    Verify Data Structure</h4>
<p>Sales Order Master business function is made up of,</p>
<table style="border-collapse: collapse; width: 735px; height: 184px;" border="2" cellspacing="2" cellpadding="1"><colgroup><col style="width: 135pt;" width="180" /> <col style="width: 79pt;" width="105" /> <col style="width: 205pt;" width="273" /> <col style="width: 83pt;" width="110" /></colgroup>
<tbody>
<tr style="height: 15pt;">
<th class="xl63" style="height: 15pt; width: 135pt; background-color: #3366ff; color: white;">Function  Name</th>
<th class="xl63" style="width: 79pt; background-color: #3366ff; color: white;">Source  Module</th>
<th class="xl63" style="width: 205pt; background-color: #3366ff; color: white;">Description</th>
<th class="xl63" style="width: 83pt; background-color: #3366ff; color: white;">Template  Name</th>
</tr>
<tr style="height: 15pt;">
<td class="xl64" style="height: 15pt; background-color: #ccffff;" height="20">F4211FSEditLine</td>
<td class="xl64" style="background-color: #ccffff;">B4200310</td>
<td class="xl64" style="background-color: #ccffff;">F4211  Edit Line</td>
<td class="xl64" style="background-color: #ccffff; color: red; font-weight: bold;">D4200310F</td>
</tr>
<tr style="height: 15pt;">
<td class="xl64" style="height: 15pt;" height="20">F4211FSEndDoc</td>
<td class="xl64">B4200310</td>
<td class="xl64">F4211 End Document</td>
<td class="xl64">D4200310G</td>
</tr>
<tr style="height: 15pt;">
<td class="xl64" style="height: 15pt;" height="20">F4211FSBeginDoc</td>
<td class="xl64">B4200310</td>
<td class="xl64">F4211 Begin Document</td>
<td class="xl64">D4200310H</td>
</tr>
<tr style="height: 15pt;">
<td class="xl64" style="height: 15pt;" height="20">F4211ClearWorkFile</td>
<td class="xl64">B4200310</td>
<td class="xl64">F4211 Delete Work File</td>
<td class="xl64">D4200310I</td>
</tr>
<tr style="height: 15pt;">
<td class="xl64" style="height: 15pt;" height="20">F4211SOEInternalFunctions</td>
<td class="xl64">B4200311</td>
<td class="xl64">F4211 Sales Order Entry Internal Functions</td>
<td class="xl64">D4200310I</td>
</tr>
<tr style="height: 15pt;">
<td class="xl64" style="height: 15pt;" height="20">F4211FSEditLinePreProcess</td>
<td class="xl64">B4200310</td>
<td class="xl64">F4211 Pre Process Values For Edit Line</td>
<td class="xl64">D4200310J</td>
</tr>
<tr style="height: 15pt;">
<td class="xl64" style="height: 15pt;" height="20">F4211EditDoc</td>
<td class="xl64">B4200312</td>
<td class="xl64">F4211 Edit Doc</td>
<td class="xl64">D4200312</td>
</tr>
</tbody>
</table>
<ul>
<li>Same information repeats through B4200310.h (so you can check the name of business function through header file)</li>
<li>Above information is captured through P98652 (Business Function Search)</li>
<li>So we are reviewing the data structure D4200310F (F4211 FS Edit Line) not D4200311I (F4211 Clear Work File)</li>
</ul>
<h4 class="km"><br /> 2. Add additional parameter through Data Structure Design Aid for Data Structure D4200310F</h4>

<p><img src="../images/eone/so001.png" border="0" alt="Data Structure Change" title="Data Structure Change" hspace="0" vspace="0"/></p>

<p> nSourceOfOrder_custom is added</p>
<p> </p>
<h4 class="km">3.     Typedef it to copy it to B4200310.h where D4200310F is defined</h4>

<p><img src="../images/eone/so002.png" border="0" alt="Typedef" title="Typedef" hspace="0" vspace="0"/></p>

<p> <br />         3-1. Look for D4200310F</p>


<p><img src="../images/eone/so003.png" border="0" alt="B4200310.h" title="B420010.h" hspace="0" vspace="0"/></p>
<p>        3-2. Open it and copy all</p>

<p><img src="../images/eone/so004.png" border="0" alt="Copy and paste" title="copy and paste" hspace="0" vspace="0"/></p>

<br />  <br />        3-3. Paste it into B4200310.h (this is replace and make it sure both data structure and and ID definition is copied correctly)<br />
<p><img src="../images/eone/so005.png" border="0" alt="Header" title="Header" hspace="0" vspace="0"/></p>
<p> </p>
<h4 class="km">4.    Add additional parameter added in D4200310F in internal function I4200310_LoadParmsForF42UI11 of B4200311.c</h4>
<p class="km">Not to disrupt existing routine, if possible, put it at the end of internal function</p>

<p><img src="../images/eone/so006.png" border="0" alt="source code" title="source code" hspace="0" vspace="0"/></p>

<p> </p>
<h4 class="km">5.    Map cache to sales order detail file at internal business function I4200310_LoadF4211ParmsForED of B4200310.c</h4>
<p class="km"><br />  Since the datatype of this column is integer direct mapping is used (because size of memory are same)</p>

<p><img src="../images/eone/so007.png" border="0" alt="mapping" title="mapping" hspace="0" vspace="0"/></p>

<p> </p>
<h4 class="km">6.    Compile both B4200310 and B4200311 to make change take effects on application</h4>

<p><img src="../images/eone/so008.png" border="0" alt="compile" title="compile" hspace="0" vspace="0"/></p>

<p> </p>
<h4 class="km">7.    Add business view column SOOR to grid</h4>
<p class="km">Now GC Source Of Ordre is available in application P4210|W4210A</p>

<p><img src="../images/eone/so009.png" border="0" alt="column appears" title="column" hspace="0" vspace="0"/></p>

<p> </p>
<h4 class="km">8.    Map GC value in calling F4211FSEditLine</h4>
<p class="km">This is called 4 places so make is sure to map all of them</p>

<p><img src="../images/eone/so010.png" border="0" alt="mapping" title="mapping" hspace="0" vspace="0"/></p>

<h4 class="km"><br /> 9.    Test it</h4>
<p> </p>

<p><img src="../images/eone/so011.png" border="0" alt="Test it."" title="test it" hspace="0" vspace="0"/></p>

 <p>User has populated it with value 777</p>
<p> </p>
<p> </p>



<!-- ======================================== End of Body ==================================== -->

  <footer class="panel-footer">
    <div class="container">
      <div class="row">
        <section id="pagebottom" class="pagebottom">
          <!-- <p>"Click Top button to go back to the top"</p> -->
          <button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
          <form>
            <input type="button" value="Go back!" onclick="history.back()">
          </form>
        </section>
      </div>
      <div class="text-center">&copy; Copyright Dong's Page 2019</div>
    </div>
  </footer>

  <!-- jQuery (Bootstrap JS plugins depend on it) -->
  <script src="../js/jquery-2.1.4.min.js"></script>
  <script src="../js/bootstrap.min.js"></script>
  <script src="../js/script.js"></script>
</body>
</html>
