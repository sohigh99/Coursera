<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Impact of Changing the Size of a Standard Data Dictionary Item</title>
<!--     <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/styles.css"> -->
    <link href='https://fonts.googleapis.com/css?family=Oxygen:400,300,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Lora' rel='stylesheet' type='text/css'>

    <style>
      body {
        font-family: "Segoe UI", Calibri, Arial, Helvetica, sans-serif;
/*        background-color: #FFFAFA;*/
/*        font-size: 14px;*/
      }

      #myBtn {
        display: none;
        position: fixed;
        bottom: 20px;
        right: 30px;
        z-index: 99;
        font-size: 18px;*/
        border: none;
        outline: none;
        background-color: #2F4F4F;
        color: white;
        cursor: pointer;
        padding: 15px;
        border-radius: 4px;
      }

      #myBtn:hover {
        background-color: #555;
      }
        .kmnotebox {
        background-color: #FFFFE0;
        border-left: 10px;
        /*border-style: dotted;*/
      }

      .kmcodeblock {
        background-color: #B0E0E6;
        border-left: 10px;
        margin-left: 2%;
        /*border-style: dotted;*/
      }

      
    </style>

  </head>


<body>
  <header>
    <nav id="header-nav" class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <a href="index.html" class="pull-left visible-md visible-lg">
            <div id="logo-img"></div>
          </a>

          <div class="navbar-brand">
            <a href="../index.html"><h1>Home Page!</h1></a>
          </div>

<!--           <form>
            <input type="button" value="Go back!" onclick="history.back()">
          </form> -->

        </div>

      </div><!-- .container -->
    </nav><!-- #header-nav -->
  </header>

<button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>

<div style="background-color:#2F4F4F;color:white;padding:0px"><h1>Impact of Changing the Size of a Standard Data Dictionary Item</h1></div>
<!-- <div style="background-color:lightgrey;padding:30px 30px 2500px">This example demonstrates how to create a "scroll to top" button that becomes visible when the user starts to scroll the page.</div> -->

<script>
// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    document.getElementById("myBtn").style.display = "block";
  } else {
    document.getElementById("myBtn").style.display = "none";
  }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>

</body>


<!-- <h1 class="km"><big><big><a name="subtitle"></a><span style="font-size: large;"><BIG>Caching in EnterpriseOne</BIG></span></big></big></h1> -->
<!-- ================================= Purpose of Document ================================== -->

<table><tr><td width='0'></td><td><A HREF="#PURPOSE">Purpose</A></td></tr></table>
<table><tr><td width='0'></td><td><A HREF="#SCOPE">Scope</A></td></tr></table>
<table><tr><td width='0'></td><td><A HREF="#BODYTEXT">Details</A></td></tr></table>
<table><tr><td width=20>&nbsp;</td><td><a href="#aref_section31">Overview</a></td></tr></table>
<table><tr><td width=20>&nbsp;</td><td><a href="#aref_section32">Issues that Can Occur when Changing the Size of String Data Dictionary Alias DL01&nbsp;</a></td></tr></table>
<table><tr><td width=20>&nbsp;</td><td><a href="#aref_section33">Consequences of String Data Dictionary Size Change to Unit of Measure</a></td></tr></table>
<table><tr><td width=40>&nbsp;</td><td><a href="#aref_section34">Symptoms</a></td></tr></table>
<table><tr><td width=40>&nbsp;</td><td><a href="#aref_section35">Cause</a></td></tr></table>
<table><tr><td width=40>&nbsp;</td><td><a href="#aref_section36">To resolve this issue:</a></td></tr></table>

<hr size=1><p>


<H2 class=km><A NAME="PURPOSE"></A>Purpose</H2>
<p>This document details the impact of changing the size on a standard EnterpriseOne Data Dictionary data item.&nbsp; The document includes the impact and some examples of the results when making this type of change. </p>
<H2 class=km><A NAME="SCOPE"></A>Scope</H2>
<p>This document is intended for the EnterpriseOne Data Dictionary Administrator</p>
<H2 class=km><A NAME="BODYTEXT"></A>Details</H2>
<a name="aref_section31"></a><h3 class="km">Overview</h3>
<p>Making a change to a standard EnterpriseOne data dictionary item is not recommended or supported.&nbsp;&nbsp;Tables, business views, applications and business functions are designed with the standard size of the data item and making a change to this size can result in errors within the applications and data integrity issues.&nbsp;&nbsp;If a data item size is changed, all tables using the data item would need to be generated, any data entered would need to be manually converted, all business functions that use the data item in their data structures would need the header files updated and business functions rebuilt, all business functions that reference tables that contain this data item would need to be rebuilt, and so forth.&nbsp;&nbsp;This is a widespread change that impacts all objects across the system that use the data item.&nbsp;&nbsp;In addition, this type of change is not supported in an upgrade.<br /> </p>
<div class="kmnotebox">NOTE: Based on the above implications of this type of change, we do not recommend making any changes to the size of standard EnterpriseOne data dictionary items.&nbsp;&nbsp;We recommend that the additional information be contained within another field, within a custom data dictionary item in a custom table or some other logic be used to achieve the needed results. By default, changing a Data Dictionary item affects all environments as the recommended configuration is to have one Data Dictionary F9210 in the Data Source 'Data Dictionary'</div>
<p><br />For additional information on the Data Dictionary, refer to <a href='../docs/1267422.html'>Overview of EnterpriseOne Data Dictionary</a>.&nbsp; <br /><br /></p>
<a name="aref_section32"></a><h3 class="km">Issues that Can Occur when Changing the Size of String Data Dictionary Alias DL01&nbsp;</h3>
<p>In EnterpriseOne, thousands of objects including Tables, Business Views, Business Functions,&nbsp; Data Structures, etc. make use of the Data Dictionary item DL01 as a member, column, or parameter.&nbsp; </p>
<ul>
<li>In EnterpriseOne (or any C Programming) a string value will be handled as 'Character Array' and it determines the end of array by reading NULL Character (Termination Character '\0').&nbsp; In changing the size of a data dictionary item, if it is not properly applied, the allocated size of the array is different from the assigned size of the array which results in a typical <strong>memory violation</strong> scenario.</li>
<li>A business function, which contains DL01 as a member of its data structure, during compilation will assign memory. For this example, DL01 is 30 in size so it will be describe as szDescription01 [31] so JDE will assign 62 bytes to hold that information.</li>
<li>&nbsp;If the change has been made after implementation, there can be multiple ODBC/OCI errors. One possible example is that EnterpriseOne recognizes F0030.DL01 as 40 characters, but the database (metadata) determines it as 30 characters (31 bytes for non-unicode encoding and 62 bytes for Unicode encoding).&nbsp; When an EnterpriseOne application tries to insert or update 40 characters, the&nbsp; Database will only accept 30 characters.&nbsp; To overcome this, the standard requirement is to generate/truncate table(s) through Object Management Workbench (OMW) with a drop/create table. Alternatively we can alter the table (column size), but this will be risky and very tedious. Therefore, the generation of Tables and Business Views would be required. </li>
</ul>
<p>The following are some discrepancies that can occur as a result of a size change of this standard DD item.</p>
<ol>
<li>Synchronization of DD items between RDB and TAMSpec</li>
<ul>
<li>Currently the change made through P92001 - Data Dictionary application will update RDB File F9210 and F92* series tables.</li>
<li>In running application it will read TAMSPEC (binary format file) which are dddict.xdb and ddb files.</li>
<li>In case synchronization was not done properly it will issue an error.</li>
</ul>
<li>Synchronization between DD and Table Columns definition in Central Objects</li>
<ul>
<li>Check individual tables whether the size of column DL01 is changed properly through xxx.h files in include folder.</li>
<li>During runtime glbltbl.xdb and ddb will be read to resolve the size. So if any of table information is not corrected/synchronized then error will come from ODBC.</li>
</ul>
<li>Synchronization within a Business Function<strong><br /></strong></li>
<ul>
<li>EnterpriseOne holds cache data using a Data Structure.</li>
<li>A String value is handled through Character Array.</li>
<li>The end of string is recognized by NULL Character '\0'.</li>
<li>If the size of the individual character array is not updated, then it will cause overlapping in memory resulting in a Memory Violation.</li>
</ul>
<li>Synchronization between two Business Functions<strong><br /></strong></li>
<ul>
<li>When Business Function A is calling Business Function B and DL01 is a member of the Data Structure of Business Function B and the size has not been changed properly, an error will occur and the process may fail to return to the calling Business Function A.</li>
</ul>
<li>Synchronization between Application and Business Function<strong><br /></strong></li>
<ul>
<li>If the size of input or returned value of a Business Function are different from each other it will cause a memory error.</li>
<li>The specifications of the application (both Interactive Application and Batch Application) has to be synchronized with the change made.</li>
</ul>
<li>Synchronization between E1 Logic and Database</li>
<ul>
<li>Table Columns and Business View Columns must be synchronized.</li>
<li>The action has to be taken either through MANUAL alternation of the database or through Generation from JDE Object Management Workbench (OMW).</li>
</ul>
</ol>
<p>&nbsp;</p>
<div class="kmnotebox">Based on the above implications of this type of change, we do not recommend making any changes to the size of standard EnterpriseOne data dictionary items. We recommend that the additional information be contained within another field, within a custom data dictionary item in a custom table or some other logic be used to achieve the needed results. In case the existing size does not meet your legal requirement, then inquire with Oracle Global Support for further clarification</div>
<p>&nbsp;</p>
<a name="aref_section33"></a><h3 class="km">Consequences of String Data Dictionary Size Change to Unit of Measure</h3>
<p>The following example shows the results of a string data dictionary size change.&nbsp; In this example, the size of the standard EnterpriseOne Data Dictionary item with DD Alias 'UOM1' UnitOfMeasurePrimary (Unit of Measure - Primary) was changed by a developer at the customer's site from a size of 2 to a size of 3. </p>
<a name="aref_section34"></a><h4 class="km">Symptoms</h4>
<p>After building a full package, multiple errors across EnterpriseOne are occurring.<br /><br />Some examples of the errors are:</p>
<ul>
<li>In clicking Find button 4310, it throws an error message <em>"There was a problem with the server while running the business function GetPODetailShipmentNumber"</em>. After disabling Transportation Module through P99410, this error does not occur anymore but P4310 does not allow to add/update data</li>
<li>In finding existing BOM through P3002 it issues "<em>Error: Y not found in User Defined Code 40 FL</em>" though F4101.IMIFLA (<em>ItemFlashMessage</em>) is blank</li>
<li>In reviewing existing Routing through P3003 it issues error "<em>Invalid Input Parameter</em>"</li>
</ul>
<p>Additional errors are occurring as well.&nbsp; </p>
<a name="aref_section35"></a><h4 class="km">Cause</h4>
<p>This issue is caused by the change of the standard EnterpriseOne string Data Dictionary item UOM1 from the shipped size of '2' to a size of '3' digits.&nbsp; This type of size change is NOT supported and results in widespread errors throughout the system.&nbsp; </p>
<ol>
<li>Check OCM to determine whether there are more then 2 data sources for table F9210 - <em>Data Field Specifications (OneWorld)</em> for all the environments</li>
<li>Go to UTB and filter data through F9210.FRUPMJ (for example greater than last full package date)</li>
<li>Look for column F9210.FRDTAS - <em>DataItemSize</em> (Data Item Size)</li>
<li>And/Or Capture jdedebug.log (call object kernel log) and determine whether data structure item for output has odd value</li>
</ol>
<p>For this example, jdedebug.log may read as below:<br /><br /><span class="kmfixedwidthfont"><small style="font-style: italic;"></small></span></p>
<div class="kmcodeblock" style="width: 95%;"><big><span class="kmfixedwidthfont">Calling Business function VerifyAndGetItemMaster <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from Level 1 for UserID. Application Name [P3002], Version [ZJDE0001] (BSFNLevel = 1)<br />IN-&gt;[ 1] szPrimaryItemNumber [4418-0031-000]<br />IN-&gt;[ 2] szBranchPlant []<br />IN-&gt;[ 3] szDescription [ ]<br />IN-&gt;[ 4] szDescription2 [ ]<br />IN-&gt;[ 5] cSymbolidentifier [ ]<br />IN-&gt;[ 6] idF4101LongRowPtr [0]<br />IN-&gt;[ 7] mnShortItemNumber [0]<br />IN-&gt;[ 8] cErrorcode [ ]<br />IN-&gt;[ 9] szLanguagepreference [ ]<br />IN-&gt;[ 10] mnAddressnumber [0]<br />IN-&gt;[ 11] szSystemcode [ ]<br />IN-&gt;[ 12] szLongItemNumber [ ]<br />IN-&gt;[ 13] szThirdItemNumber [ ]<br />IN-&gt;[ 14] szItemFlashMsg [ ]<br />IN-&gt;[ 15] cReturnPtr [1]<br />...<br />Entering JDB_FetchKeyed<br />SELECT * FROM PRODDTA.F4101 WHERE ( IMLITM = '4418-0031-000' )<br />Fetched the record<br />OUT-&gt;[ 1] szPrimaryItemNumber [4418-0031-000 ]<br />OUT-&gt;[ 2] szBranchPlant []<br />OUT-&gt;[ 3] szDescription [D1 - FRAME ]<br />OUT-&gt;[ 4] szDescription2 [ ]<br />OUT-&gt;[ 5] cSymbolidentifier [2]<br />OUT-&gt;[ 6] idF4101LongRowPtr [1001]<br />OUT-&gt;[ 7] mnShortItemNumber [1517]<br />OUT-&gt;[ 8] cErrorcode [ ]<br />OUT-&gt;[ 9] szLanguagepreference [ ]<br />OUT-&gt;[ 10] mnAddressnumber [0]<br />OUT-&gt;[ 11] szSystemcode [ ]<br />OUT-&gt;[ 12] szLongItemNumber [4418-0031-000 ]<br />OUT-&gt;[ 13] szThirdItemNumber [AFC-FR-D1-001~999 ]<br /><strong>OUT-&gt;[ 14] szItemFlashMsg [Y 10 ]</strong><br />OUT-&gt;[ 15] cReturnPtr [1]<big><br />...</big><br />Return value is 0 for VerifyAndGetItemMaster. (BSFNLevel = 1) &nbsp;</span></big></div>
<p><span class="kmfixedwidthfont"><small style="font-style: italic;"><br /></small></span><br />Actual Data is written from F4101 as below, </p>
<table class="km" style="width: 100%;" border="1" cellspacing="1" cellpadding="1">
<tbody>
<tr><th class="km">imlitm</th><th class="km">...</th><th class="km">imuom1</th><th class="km">...</th><th class="km">imback</th><th class="km">imifla</th><th class="km">imtfla</th></tr>
<tr>
<td class="km">4418-0031-000</td>
<td class="km">&nbsp;</td>
<td class="km">EA</td>
<td class="km">&nbsp;</td>
<td class="km">Y</td>
<td class="km">&nbsp;</td>
<td class="km">10</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<ul>
<li>szItemFlashMsg is defined for 2 digits character but from jdedebug.log which appears 6 in length. This is typical corruption of lpds of X4101 - <em>VerifyAndGetItemMaster </em></li>
<li>Business Function <em>VerifyAndGetItemMaster </em>is returning pointer after reading F4101</li>
<li>Since imuom1 is 3 in size, column value 'Y' for imback is shifted to right (in array it only has index to identify start of string (or character array) and it has assigned value 6 following column value 10 is combined</li>
<li>As result, it shows 'Y 10 ' then Codes 'FL' is defined with Code Length 2 so DD validation for column F4101.IFLA tries to validate the 1st two characters 'Y ' which 40/FL does not have this value</li>
</ul>
<a name="aref_section36"></a><h4 class="km">To resolve this issue:</h4>
<ol>
<li>Restore the change made to the standard EnterpriseOne data dictionary item (change the size of string DD Alias 'UOM1' from 3 back to the shipped value of 2).</li>
<li>Verify that the value of F9210.FRDTAS appears as '2'. (Optional)</li>
<li>Delete dddict, glbltbl.xdb and *.ddb file across system (Enterprise Server, Deployment Server and where client is working).</li>
<li>Truncate table F989999 - <em>Java Persistent Objects table.</em></li>
<li>Delete JDBj cache in JAS.</li>
<li>Build Full Package.</li>
<li>Full generation of serialized object (for performance reason) (Optional).</li>
</ol>
<p>&nbsp;</p>
<div class="kmnotebox">NOTE:<br />
<ul>
<li>To avoid these type of errors, never change the size of a Standard EnterpriseOne Data Dictionary Item.&nbsp; This change is not supported and can have widespread system ramifications.</li>
<li>Unless you have deleted TAMSpec for DDDICT and GLBLTBL globally the change made from the Data Dictionary will take effect only when the full package is built. That is why issue is described as occurring after deploying a Full Package.</li>
<li>By default, changing a Data Dictionary item affects all environments as the recommended configuration is to have one Data Dictionary F9210 in the Data Source 'Data Dictionary'</li>
</ul>
</div>




<!-- ======================================== End of Body ==================================== -->

  <footer class="panel-footer">
    <div class="container">
      <div class="row">
        <section id="pagebottom" class="pagebottom">
          <!-- <p>"Click Top button to go back to the top"</p> -->
          <button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
          <form>
            <input type="button" value="Go back!" onclick="history.back()">
          </form>
        </section>
      </div>
      <div class="text-center">&copy; Copyright Dong's Page 2019</div>
    </div>
  </footer>

  <!-- jQuery (Bootstrap JS plugins depend on it) -->
  <script src="../js/jquery-2.1.4.min.js"></script>
  <script src="../js/bootstrap.min.js"></script>
  <script src="../js/script.js"></script>
</body>
</html>
