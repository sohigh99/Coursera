<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Subsystem Print Invoice (R42565|ZJDE0002) in P4205 FAQ</title>
<!--     <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/styles.css"> -->
    <link href='https://fonts.googleapis.com/css?family=Oxygen:400,300,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Lora' rel='stylesheet' type='text/css'>

    <style>
      body {
        font-family: "Segoe UI", Calibri, Arial, Helvetica, sans-serif;
/*        background-color: #FFFAFA;*/
/*        font-size: 14px;*/
      }

      #myBtn {
        display: none;
        position: fixed;
        bottom: 20px;
        right: 30px;
        z-index: 99;
        font-size: 18px;*/
        border: none;
        outline: none;
        background-color: #2F4F4F;
        color: white;
        cursor: pointer;
        padding: 15px;
        border-radius: 4px;
      }

      #myBtn:hover {
        background-color: #555;
      }
        .kmnotebox {
        background-color: #FFFFE0;
        border-left: 10px;
        /*border-style: dotted;*/
      }

      .kmcodeblock {
        background-color: #B0E0E6;
        border-left: 10px;
        /*border-style: dotted;*/
      }

      
    </style>

  </head>


<body>
  <header>
    <nav id="header-nav" class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <a href="index.html" class="pull-left visible-md visible-lg">
            <div id="logo-img"></div>
          </a>

          <div class="navbar-brand">
            <a href="../index.html"><h1>Home Page!</h1></a>
          </div>

<!--           <form>
            <input type="button" value="Go back!" onclick="history.back()">
          </form> -->

        </div>

      </div><!-- .container -->
    </nav><!-- #header-nav -->
  </header>

<button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>

<div style="background-color:#2F4F4F;color:white;padding:0px"><h1>Subsystem Print Invoice (R42565|ZJDE0002) in P4205 FAQ</h1></div>
<!-- <div style="background-color:lightgrey;padding:30px 30px 2500px">This example demonstrates how to create a "scroll to top" button that becomes visible when the user starts to scroll the page.</div> -->

<script>
// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    document.getElementById("myBtn").style.display = "block";
  } else {
    document.getElementById("myBtn").style.display = "none";
  }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>

</body>


<!-- <h1 class="km"><big><big><a name="subtitle"></a><span style="font-size: large;"><BIG>Caching in EnterpriseOne</BIG></span></big></big></h1> -->
<!-- ================================= Purpose of Document ================================== -->

<h2 class="km"><big><big><a name="section01"></a><span style="font-size: medium;"><BIG>Goal</BIG></span></big></big></h2>

<p>This document is part of an Information Center - to see other documents related to Sales, please use the links provided below:</p>
<h5 class="km"><a href="&lt;&lt;INLINE_NOTE:1342177.2&gt;&gt;" target="_blank">Information Center: Overview of JD Edwards EnterpriseOne Sales Product</a> &gt; <a href="&lt;&lt;INLINE_NOTE:1346684.2&gt;&gt;" target="_blank">Information Center: Using JD Edwards EnterpriseOne Sales Product</a> &gt; Note 983989.1</h5>
<p>Document for Frequently Asked Questions around the Subsystem Version if Invoice Print (R42565) called from Shipment Confirmation (P4205).</p>

<h4>Table of Contents</h4>
<ul>
  <li><a href="#q1">Question 1: Need to print out invoice from warehouse as soon as we operate Shipment Confirmation. Is there any way to perform this?</a></li>
  <li><a href="#q2">Question 2: If the version for subsystem invoice print is not specified, which version will be set as default?</a></li>
  <li><a href="#q3">Question 3: What should be done to create a custom version to call?</a></li>
  <li><a href="#q4">Question 4: After setting Processing Option parameter, and order was Ship Confirmed, but no data was in F986113?</a></li>
  <li><a href="#q5">Question 5: How can we confirm subsystem job is on and running?</a></li>
  <li><a href="#q6">Question 6: A paper invoice needs to be printed as soon as shipment confirmation is complete, can this be done?</a></li>
  <li><a href="#q7">Question 7: The description of Processing Option parameter reads "Print Invoice automatically", does it mean that we do not have to change any settings from any initialized file?</a></li>
  <li><a href="#q8">Question 8: Sometimes, Detail line of Shipment confirmation is more than 10 lines. If next shipment confirmation handled before it prints invoice, what will happen?</a></li>
  <li><a href="#q9">Question 9: To minimize above scenario, what is a good way to implement above?</a></li>
  <li><a href="#q10">Question 10: Now there are a lot of waiting job from P986113, what went wrong? Is there additional action to take note?</a></li>
  <li><a href="#q11">Question 11: From WSJ - Work with Server Job when we click View PDF it only shows the last Invoice printed, is this correct?</a></li>
  <li><a href="#q12">Question 12: Will individual invoice be stored in \PrintQueue directory of batch/logic server?</a></li>
  <li><a href="#q13">Question 13: Can this combine multiple sales orders into a single invoice?</a></li>
  <li><a href="#q14">Question 14: Then what shall we do if we need to bill a customer once a week after combine multiple shipment?</a></li>
  <li><a href="#q15">Question 15: In case we need to have soft copy of PDF result, what shall we do?</a></li>
  <li><a href="#q16">Question 16: How does system write records into F986113 - 'Subsystem Job Master'?</a></li>
  <li><a href="#q17">Question 17: How to review JDE.INI settings?</a></li>
  <li><a href="#q18">Question 18: F986113 table contains huge number of records, what shall we do?</a></li>
  <li><a href="#q19">Question 19: What can be done in order to make sure P4205 completes all the updates before R42565 is run?</a></li>
</ul>

<!-- ======================================== Body Starts Here =================================== -->

<h2 class="km"><big><big><a name="section01"></a><span style="font-size: medium;"><BIG>Questions and Answers</BIG></span></big></big></h2>

<h4 class="km"><strong><a name="q1"></a>Question 1:</strong> Need to print out invoice from warehouse as soon as we operate Shipment Confirmation. Is there any way to perform this?</h4>
<p><strong>Answer 1:</strong> This can be done by implementing Subsystem job through Processing Option parameter of P4205 - 'Shipment confirmation' as follows:<br /> <br /> &nbsp;&nbsp;&nbsp; Item #1: Subsystem Invoice (R42565), set 1 = 'Print Invoice automatically' from 'Print' tab<br /> &nbsp;&nbsp;&nbsp; Item #2 (Optional): Print Invoices (R42565) specify version to call</p>
<hr />
<h4 class="km"><a name="q2"></a><strong>Question 2:</strong> If the version for subsystem invoice print is not specified, which version will be set as default?</h4>
<p><strong>Answer 2:</strong> If the version of Invoice Print (R42565) is not specified, standard subsystem version ZJDE0002 will be defaulted.</p>
<hr />
<h4 class="km"><a name="q3"></a><strong>Question 3:</strong> What should be done to create a custom version to call?</h4>
<p><strong>Answer 3: </strong>Copy the version R42565|ZJDE0002. <em>Note: Do not ADD, as subsystem implementation is done at Report Version level. This information is written into RDASPEC or equivalent specification file.</em></p>
<hr />
<h4 class="km"><a name="q4"></a><strong>Question 4:</strong> After setting Processing Option parameter, and order was Ship Confirmed, but no data was in F986113?</h4>
<p><strong>Answer 4:</strong> The default Data Source in UTB is defaulted based on OCM mapping. For example, it will set Default Data Source as 'System - 900' but table F986113 belongs to Bootstrap files so Data Source from 'System - 900' has to be overridden to MACHINENAME - 900 Server Map' defined from JDE.ini in your logic server. For example:</p>
<div style="margin-left: 40px;">jde.ini in logic server:<br /> [DB SYSTEM SETTINGS]<br /> Base Datasource=MACHINENAME - 900 Server Map<br /> Object Owner=SVM900<br /> Server=ServerName</div>
<p>&nbsp;</p>
<div style="margin-left: 40px;">jde.ini in Local machine:<br /> [DB SYSTEM SETTINGS]<br /> Base Datasource=System - 900<br /> Object Owner=SY900<br /> Server=ServerName</div>
<p><br /> Alternative way to confirm this:</p>
<ol>
<li>(Fast Path) WSJ - Work with Servers call P986116 - Work with Servers</li>
<li>(Highlight) logic server you want to check, then (Row Exit) Subsystem Jobs to call P986113 - Subsystem Jobs. (Or you can call P986113 directly through subsystem)</li>
<li>On [Work with Subsystems] screen, choose radio button "Waiting Jobs" then press Find button to list up waiting jobs.</li>
</ol><hr />
<h4 class="km"><a name="q5"></a><strong>Question 5:</strong> How can we confirm subsystem job is on and running?</h4>
<p><strong>Answer 5:</strong> Subsystem job will be at waiting status till you submit job manually. This job has to be done whenever running job has been terminated or JDE service gets restarted.</p>
<hr />
<h4 class="km"><a name="q6"></a><strong>Question 6:</strong> A paper invoice needs to be printed as soon as shipment confirmation is complete, can this be done?</h4>
<p><strong>Answer 6: </strong>First of all, make sure that there is a physical printer that has been mapped and defined it to the subsystem version used. Then whenever one transaction is done, it will send the PDF to printer buffer.</p>
<hr />
<h4 class="km"><a name="q7"></a><strong>Question 7:</strong> The description of Processing Option parameter reads "Print Invoice automatically", does it mean that we do not have to change any settings from any initialized file?</h4>
<p><strong>Answer 7:</strong> This is for implementation of Subsystem only. That is, it does not mean that it will print out PDF result immediately. To print out immediately, JDE.ini (where it runs) and JAS.ini (where end-user are accessing) have to be modified as follows:</p>
<div style="margin-left: 40px;">[NETWORK QUEUE SETTINGS]<br /> PrintImmediate=TRUE</div>
<div style="margin-left: 40px;">&nbsp;</div>
<div><hr /></div>
<h4 class="km"><a name="q8"></a><strong>Question 8:</strong> Sometimes, Detail line of Shipment confirmation is more than 10 lines. If next shipment confirmation handled before it prints invoice, what will happen?</h4>
<p><strong>Answer 8: </strong>Next job will be pending until the 1st job gets finished. So it is very important to know that Subsystem Job is most suitable for small size of batch.</p>
<hr />
<h4 class="km"><a name="q9"></a><strong>Question 9:</strong> To minimize above scenario, what is a good way to implement above?</h4>
<p><strong>Answer 9:</strong> Define individual Job Queue for an individual Subsystem Job (do not set it for Default Job Queue) .</p>
<ol>
<li>Add Job Queue through P986130 - 'Work With Job Queues'</li>
<li>Define above job queue in version detail</li>
</ol><hr />
<h4 class="km"><a name="q10"></a><strong>Question 10:</strong> Now there are a lot of waiting job from P986113, what went wrong? Is there additional action to take note?</h4>
<p><strong>Answer 10: </strong>Power user or system administrator has to submit version MANUALLY to the job queue defined when there is no RUNNING job. This action will:</p>
<ol>
<li>Through API ubeReport_AddSubsystemRecord() (in lower release API jdeAddSubsystemRecord()] called from B4200760 - AddOrderToSubsystemQueue (Add Order to Subsystem Queue) will insert record into F986113 as follows:-</li>
</ol>
<p>&nbsp;</p>
<div style="margin-left: 40px;">SVM900.F986113.SSJOBSTS(JobstatusOW) which appears as 'GC Job Type' 'R - Subsystem Record'<br /> SVM900.F986113.SSOPCR(UBEOptionCode) which appears as 'GC Job Status' 'W - Subsystem Record Waiting'<br /> <br /> So if you confirm shipment for 10 different orders (click OK 10 times and committed) then there will be 10 different records from F986113.</div>
<ol start="2">
<li>Submit it manually then it creates records into F986113 with value of:</li>
</ol>
<div style="margin-left: 40px;">SVM900.F986113.SSJOBSTS(JobstatusOW) which appears as 'GC Job Type' 'S - Subsystem Job'<br /> SVM900.F986113.SSOPCR(UBEOptionCode) which appears as 'GC Job Status' 'R - Subsystem Job Running'<br /> <br /> This implementation is embedded at version level (so when a custom version is created, make sure to copy existing version of R42565|ZJDE0002) by setting/defining Subsystem job (Version&gt;Report Properties&gt;(Tab) Advanced&gt;Subsystem Job is checked with Wait Time (ms) = 50)</div>
<ol start="3">
<li>Like wise a normal UBE, one job will be written into SVM900.F986110 - 'Job Control Status Master' with status(F986110.JCJOBSTS) of 'W - Waiting'.</li>
<li>Then Queue kernel will look for any waiting job. If there is any available resources it will promote status to 'S - Queue' and then 'P - Processing'. The job will be remained as P - Processing Status until the job is terminated.</li>
</ol><hr />
<h4 class="km"><a name="q11"></a><strong>Question 11:</strong> From WSJ - Work with Server Job when we click View PDF it only shows the last Invoice printed, is this correct?</h4>
<p><strong>Answer 11:</strong> Yes, the results are correct. It will show only the last successful UBE of Invoice.</p>
<hr />
<h4 class="km"><a name="q12"></a><strong>Question 12:</strong> Will individual invoice be stored in \PrintQueue directory of batch/logic server?</h4>
<p><strong>Answer 12:</strong>&nbsp;No, it will not create individual PDF file. As it described above, the job will be invoked when MANUAL submission was taken place. Then this submission will assign Job Number for this manual submission and this job number will be retained till job is killed/terminated. So the PDF result in PrintQueue will only be the first Job Number. For this example, the PDF you can view (direct file access) is R42565_ZJDE0002_JobNumber.pdf.</p>
<hr />
<h4 class="km"><a name="q13"></a><strong>Question 13:</strong> Can this combine multiple sales orders into a single invoice?</h4>
<p><strong>Answer 13:</strong> As the data selection of subsystem job reads, it handles data DOCO - S/O Number, DCTO - S/O Type and KCOO - Order Company level. So one S/O will create one Invoice Number. The way it picks up date is depending on the processing option you have set. So in order not to pick up the lines which are not ship confirmed, ensure the status code in Processing Option is valid. If possible secure it to prevent users from changing it.</p>
<hr />
<h4 class="km"><a name="q14"></a><strong>Question 14:</strong> Then what shall we do if we need to bill a customer once a week after combine multiple shipment?</h4>
<p><strong>Answer 14:</strong> The invoices can be consolidated by running Reprint Invoice.</p>
<hr />
<h4 class="km"><a name="q15"></a><strong>Question 15:</strong> In case we need to have soft copy of PDF result, what shall we do?</h4>
<p><strong>Answer 15:</strong> Run Reprint Invoice (by setting Order Status properly in Processing Option).</p>
<hr />
<h4 class="km"><a name="q16"></a><strong>Question 16:</strong> How does system write records into F986113 - 'Subsystem Job Master'?</h4>
<p><strong>Answer 16:</strong> Subsystem Job is implemented xxxEndDoc of master BSFN. For example:</p>
<div style="margin-left: 40px;">N4200790 - ShipconfirmEndDoc will call BSFN B4200760 - AddOrderToSubsystemQueue (Add Order to Subsystem Queue)</div>
<div style="margin-left: 40px;">&nbsp;</div>
<div><hr /></div>
<h4 class="km"><a name="q17"></a><strong>Question 17:</strong> How to review JDE.INI settings?</h4>
<p><strong>Answer 17:</strong> Ensure JDE.ini (where Job is running) is the definition for UBE SUBSYSTEM KERNEL and maxNumberOfProcesses is greater than or equal to 1 and UBESubsystemLimit has value which is greater than 1.</p>
<div style="margin-left: 40px;">[JDENET_KERNEL_DEF12]<br /> krnlName=UBE SUBSYSTEM KERNEL<br /> dispatchDLLName=jdekrnl.dll<br /> dispatchDLLFunction=_JDEK_DispatchUBESBSMessage@28<br /> maxNumberOfProcesses=1<br /> numberOfAutoStartProcesses=0<br /> <br /> [UBE]<br /> UBESubsystemLimit=3</div>
<div style="margin-left: 40px;">&nbsp;</div>
<div><hr /></div>
<h4 class="km"><a name="q18"></a><strong>Question 18:</strong> F986113 table contains huge number of records, what shall we do?</h4>
<p><strong>Answer 18:</strong> Validate whether the job written in F986113 is required for your daily business. If it is required, then let it run, otherwise modify the processing options accordingly and remove existing data using DML tools.</p>
<hr />
<h4 class="km"><a name="q19"></a><strong>Question 19:</strong> What can be done in order to make sure P4205 completes all the updates before R42565 is run?</h4>
<p><strong>Answer 19</strong>: When ship confirming a sales order, the subsystem version of R42565 seems to run before the next status of the order is updated by P4205 and as a result, the order is not being selected for invoicing by R42565.</p>
<p>As per Bug <a href="&lt;&lt;INLINE_BUG:13713044&gt;&gt;" target="_blank">13713044</a> - "Subsystem Invoicing from Ship Confirm does not Work", the issue occurs because the UBE is executing before P4205 completes its commitments of the database transactions related to the sales order(s) being processed. <br /> <br /> The solution is to get the UBE to pick up the sales order line(s) after Ship Confirm has completed its commitment processing of the transaction. There are a couple of recommended solutions for this fix. <br /> <br /> <strong>Recommendation 1</strong>: Version ZJDE0002 for R42565 is shipped with a wait time setting of 50 milliseconds. This is a very short wait cycle for the usage of P4205. The recommendation is to reset this value to 2000 or 3000 MS. The higher the setting, the lower the likelihood of this issue ever occurring.</p>
<p>The subsystem setup white paper <a href="&lt;&lt;INLINE_NOTE:1265778.1&gt;&gt;" target="_blank">Doc ID 1265778.1</a> - "E1: SS: Overview of Subsystem Processing in EnterpriseOne" discusses how to accomplish this change. <br /> <br /> <strong>Recommendation 2</strong>: Avoid submitting R42565 altogether from P4205 and set up R42565 to run off of a scheduled setup. The scheduled version of R42565 would be run as often needed, and the UBE would use data selection to pick up orders that were just run through Ship Confirm. If the customer is not using the scheduler, this solution will be more time consuming to implement. If the customer is using a scheduler to submit batch jobs, this solution may be the optimal fix as there are no chances of the UBE ever submitting before transaction processing completes.</p>
<hr />


<p>&nbsp;</p>



<!-- ======================================== End of Body ==================================== -->

  <footer class="panel-footer">
    <div class="container">
      <div class="row">
        <section id="pagebottom" class="pagebottom">
          <!-- <p>"Click Top button to go back to the top"</p> -->
          <button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
          <form>
            <input type="button" value="Go back!" onclick="history.back()">
          </form>
        </section>
      </div>
      <div class="text-center">&copy; Copyright Dong's Page 2019</div>
    </div>
  </footer>

  <!-- jQuery (Bootstrap JS plugins depend on it) -->
  <script src="../js/jquery-2.1.4.min.js"></script>
  <script src="../js/bootstrap.min.js"></script>
  <script src="../js/script.js"></script>
</body>
</html>
