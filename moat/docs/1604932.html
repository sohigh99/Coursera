<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Product Allocation Preference Profiles (P40070, P40073, P40307, P40339, P42090)</title>
<!--     <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/styles.css"> -->
    <link href='https://fonts.googleapis.com/css?family=Oxygen:400,300,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Lora' rel='stylesheet' type='text/css'>

    <style>
      body {
        font-family: "Segoe UI", Calibri, Arial, Helvetica, sans-serif;
/*        background-color: #FFFAFA;*/
/*        font-size: 14px;*/
      }

      #myBtn {
        display: none;
        position: fixed;
        bottom: 20px;
        right: 30px;
        z-index: 99;
        font-size: 18px;*/
        border: none;
        outline: none;
        background-color: #2F4F4F;
        color: white;
        cursor: pointer;
        padding: 15px;
        border-radius: 4px;
      }

      #myBtn:hover {
        background-color: #555;
      }
        .kmnotebox {
        background-color: #FFFFE0;
        border-left: 10px;
        /*border-style: dotted;*/
      }

      .kmcodeblock {
        background-color: #B0E0E6;
        border-left: 10px;
        margin-left: 2%;
        /*border-style: dotted;*/
      }

      
    </style>

  </head>


<body>
  <header>
    <nav id="header-nav" class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <a href="index.html" class="pull-left visible-md visible-lg">
            <div id="logo-img"></div>
          </a>

          <div class="navbar-brand">
            <a href="../index.html"><h1>Home Page!</h1></a>
          </div>

<!--           <form>
            <input type="button" value="Go back!" onclick="history.back()">
          </form> -->

        </div>

      </div><!-- .container -->
    </nav><!-- #header-nav -->
  </header>

<button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>

<div style="background-color:#2F4F4F;color:white;padding:0px"><h1>Product Allocation Preference Profiles (P40070, P40073, P40307, P40339, P42090)</h1></div>
<!-- <div style="background-color:lightgrey;padding:30px 30px 2500px">This example demonstrates how to create a "scroll to top" button that becomes visible when the user starts to scroll the page.</div> -->

<script>
// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    document.getElementById("myBtn").style.display = "block";
  } else {
    document.getElementById("myBtn").style.display = "none";
  }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>

</body>


<!-- <h1 class="km"><big><big><a name="subtitle"></a><span style="font-size: large;"><BIG>Caching in EnterpriseOne</BIG></span></big></big></h1> -->
<!-- ================================= Purpose of Document ================================== -->

<table><tr><td width='0'></td><td><A HREF="#PURPOSE">Purpose</A></td></tr></table>
<table><tr><td width='0'></td><td><A HREF="#SCOPE">Scope</A></td></tr></table>
<table><tr><td width='0'></td><td><A HREF="#BODYTEXT">Details</A></td></tr></table>
<table><tr><td width=20>&nbsp;</td><td><a href="#aref_section31">Product Allocation (Preference Type 07)</a></td></tr></table>
<table><tr><td width=20>&nbsp;</td><td><a href="#aref_section32">Product Allocation by Branch (Preference Type 39)</a></td></tr></table>
<table><tr><td width=20>&nbsp;</td><td><a href="#aref_section33">Using Product Allocation Hold</a></td></tr></table>
<table><tr><td width=20>&nbsp;</td><td><a href="#aref_section34">Additional Information</a></td></tr></table>
<table><tr><td width='0'></td><td><A HREF="#REF">References</A></td></tr></table><hr size=1><p>
<!-- class=km before applies to --><H2 class=km>Applies to:  </H2>
JD Edwards EnterpriseOne CRM Sales Order Entry - Version XE and later<br />JD Edwards EnterpriseOne Sales Order Entry - Version XE and later<br />JD Edwards EnterpriseOne Sales Order Management - Version XE and later<br />JD Edwards EnterpriseOne Sales Order Processing - Version XE and later<br />Information in this document applies to any platform.<br />

<H2 class=km><A NAME="PURPOSE"></A>Purpose</H2>
<p><strong>Overview</strong></p>
<p>The Product Allocation preference is used to control the sales of products by restricting the quantities that can be sold. Quantity limits can be set which specify the quantity each customer is allowed to purchase, or the quantity allowed to be sold of each item. Complex Customer Groups will not work with this preference.  

<ul>
<li>Units (Allocation Method 1). Enter the Quantity Limit and leave % of Pool and Quantity Pool Size blank.</li>
<li>Percentage (Allocation Method 2). Enter % of Pool and Quantity Pool size and the system automatically calculates the Quantity Limit.</li>
</ul>
<p>When an order is placed for an allocated product, the quantity ordered accumulates toward the allocation limit. The Quantity Sold field is updated each time sales orders are entered for the allocated product and displays the quantity ordered since the allocation went into effect. When an order is changed or canceled, the quantity is subtracted from the running total. When the Quantity Limit is exceeded, the quantity will highlight and a warning is issued in Sales Order Entry. <br /><br />Quantities should not be enabled in the Preference Master for this preference. Kits and configured items are not functional with the Product Allocation preference.</p>
<H2 class=km><A NAME="SCOPE"></A>Scope</H2>
<p> </p>
<H2 class=km><A NAME="BODYTEXT"></A>Details</H2>
<a name="aref_section31"></a><h3 class="km">Product Allocation (Preference Type 07)</h3>
<p><strong>Set Up</strong></p>
<p>1. Preference Hierarchy &ndash; in Preference Master (P40070), inquire on the preference type and take the Row Exit to Preference Hierarchy (P40073).</p>
<p><img src="../images/p07001.png" border="1" alt="1" title="1" hspace="0" vspace="0"/></p>
<p><em>Note:  Enable Quantity is set to No, which is a requirement for both allocation preferences.</em></p>
<p><img src="../images/p07002.png" border="1" alt="2" title="2" hspace="0" vspace="0"/></p>
<p><em>Note:  This hierarchy was set up without using Customer Groups, which is not supported for either allocation preference.</em><br /><br />2. In Product Allocation Profiles (P40307), add the product allocation preference. In this example, this preference is set up for an item and a customer, with a Quantity Limit of 100 EA.</p>
<p><img src="../images/p07003.png" border="1" alt="3" title="3" hspace="0" vspace="0"/><br /><br />3. Sales Order Entry (P4210) &ndash; enable Preferences tab, Option #1 (Preference Profile Processing)</p>
<p><img src="../images/p07004.png" border="1" alt="4" title="4" hspace="0" vspace="0"/><br /><br />4. In the Preference Processing Options (R40400) version called by P4210, enable Product Allocation.</p>
<p><img src="../images/p07005.png" border="1" alt="5" title="5" hspace="0" vspace="0"/></p>
<p><strong>Steps</strong><br /><br />1. Add a sales order for a quantity higher than the Quantity Limit set up for this preference. The following warning is received: Product Allocation Preference Error (Error ID 3870)</p>
<p><img src="../images/p07006.png" border="1" alt="6" title="6" hspace="0" vspace="0"/><br /> <br />2. Because this is a warning, the user has the option to ignore the warning and continue order entry, or to cancel the line.  To cancel the line, take the Row Exit to Product Allocation.</p>
<p><img src="../images/p07007.png" border="1" alt="7" title="7" hspace="0" vspace="0"/><br /> <br />3. In Work with Product Allocation Quantity (P42131), the Quantity Ordered, Quantity Limit and Quantity Over will indicate why this order received the warning.  To cancel the quantity, select Return Balance from the Row Exit.</p>
<p><img src="../images/p07008.png" border="1" alt="8" title="8" hspace="0" vspace="0"/><br /> <br />4. Order line is canceled</p>
<p><img src="../images/p07009.png" border="1" alt="9" title="9" hspace="0" vspace="0"/></p>
<hr />
<a name="aref_section32"></a><h3 class="km">Product Allocation by Branch (Preference Type 39)</h3>
<p>The Product Allocation (by Branch) preference is used in the same manner as the previous preference, except for the additional flexibility of using a specific Branch/Plant.<em> Note: The Product Allocation (Preference Type 07) and Product Allocation by branch (Preference Type 39) preferences are resolved together.</em><br /><br />When these two preferences are activated at the same time, Preference Type 39 takes precedence over Preference Type 07, therefore, the Preference Hierarchy and other details are according to the definition for Preference Type 39. If the set up for Preference Type 07 is not matching the setup for Preference Type 39, then the preference will not work. Also, if processing only Preference Type 07, make sure that Product Allocation by Branch (Preference Type 39) is not activated in Preference Process Options (R40400).  <br /><br /><strong>Set Up</strong><br /><br />1. Preference Hierarchy &ndash; in Preference Master (P40070), inquire on the preference type and take the Row Exit to Preference Hierarchy (P40073).</p>
<p><img src="../images/p07010.png" border="1" alt="10" title="10" hspace="0" vspace="0"/></p>
<p><em>Note:  Enable Quantity is set to No, which is a requirement for both allocation preferences.</em></p>
<p><img src="../images/p07011.png" border="1" alt="11" title="11" hspace="0" vspace="0"/><br /><br />2. In this example, an Item Group will be used for setting up the preference.  Define Item Group in Item Group Preferences (P40072).</p>
<p><img src="../images/p07012.png" border="1" alt="12" title="12" hspace="0" vspace="0"/><br /> <br />3. Product Allocation Profiles (P40339) - add the product allocation preference for customer and Item Group.  In this example, for Branch 30, Allocation Method 2 (percentage) of Pool Size of 1,000 EA is set up for Customer 2276 and Item Group B. The Quantity Limit is calculated by the system using Quantity Pool Size X Percentage of Pool (1000 x 75% = 750).</p>
<p><img src="../images/p07013.png" border="1" alt="13" title="13" hspace="0" vspace="0"/><br /> <br />4. Sales Order Entry (P4210) &ndash; enable Preferences tab, Option #1 (Preference Profile Processing)</p>
<p><img src="../images/p07014.png" border="1" alt="4" title="4" hspace="0" vspace="0"/><br /> <br />5. In the Preference Processing Options (R40400) version called by P4210, enable Product Allocation (branch specific).</p>
<p><img src="../images/p07015.png" border="1" alt="14" title="14" hspace="0" vspace="0"/></p>
<p><strong>Steps</strong><br /><br />1. Add a sales order for a quantity higher than the Quantity Limit set up for this preference. The following warning is received: Product Allocation Preference Error (Error ID 3870).</p>
<p><img src="../images/p07016.png" border="1" alt="15" title="15" hspace="0" vspace="0"/><br /> <br />2. To review Product Allocation information, take the Row Exit to Product Allocation (42131).</p>
<p><img src="../images/p07017.png" border="1" alt="16" title="16" hspace="0" vspace="0"/><br /> <br />3. Review the allocation information.  In this example, selecting Close so the line can be modified, rather than canceled.</p>
<p><img src="../images/p07018.png" border="1" alt="17" title="17" hspace="0" vspace="0"/><br /> <br />4. Change the quantity on the line to below the Quantity Limit and warning disappears.</p>
<p><img src="../images/p07019.png" border="1" alt="18" title="18" hspace="0" vspace="0"/><br /> <br />5. Add another line for a different branch that does not have Product Allocation set up for this item. No error is received, as expected.</p>
<p><img src="../images/p07020.png" border="1" alt="19" title="19" hspace="0" vspace="0"/></p>
<hr />
<a name="aref_section33"></a><h3 class="km">Using Product Allocation Hold</h3>
<p>The Product Allocation Hold can be used in conjunction with both Product Allocation Preferences, but not as a stand-alone hold code.  When this hold code is used, the sales order will be put on hold when the user enters an order that exceeds that allocation definition.<br /><br /><strong>Set Up</strong><br /><br />1. In Hold Order Constants (P42090), the Product Allocation Hold is typically set up as a Line Level hold. However it should be understood that a Line Basis Hold puts the entire order on hold.</p>
<p><img src="../images/p07021.png" border="1" alt="20" title="20" hspace="0" vspace="0"/><br /> <br />2. In Sales Order Entry version of P4210, set Order Holds tab, Option #7 (Product Allocation Hold) with the PA hold code.<br /><br />
<img src="../images/p07022.png" border="1" alt="21" title="21" hspace="0" vspace="0"/><br /><br /><strong>Steps</strong><br /><br />In this example, the Product Allocation Hold will be demonstrated in conjunction with the Product Allocation Preference (Preference Type 07).<br /><br />1. Enter an order that exceeds the limit.</p>
<p><img src="../images/p07023.png" border="1" alt="22" title="22" hspace="0" vspace="0"/><br /> <br />2. The user submits the order, bypassing the Product Allocation Preference Error warning message.  This causes the order to go on PA hold, which will need to be released before processing the order.</p>
<p><img src="../images/p07024.png" border="1" alt="23" title="23" hspace="0" vspace="0"/></p>
<hr />
<a name="aref_section34"></a><h3 class="km">Additional Information</h3>
<ul>
<li>Product Allocation (Preference Type 07 and Preference Type 39) can be set up as Basic preferences only.</li>
<li>Product Allocation is not used for item only preferences.</li>
<li>The Product Allocation preferences (Preference Type 07 and Preference Type 39) cannot be set up using complex Customer Groups. This functionality has been requested in Enhancement Bug 10983620 : PROD.ALLOC. AND COMPLEX GROUP &ndash; SAR: 8751888</li>
<li>The Product Allocation (Preference Type 07) and Product Allocation by branch (Preference Type 39) preferences are resolved together.</li>
<li>When these two preferences are activated at the same time, Preference Type 39 takes precedence over Preference Type 07, therefore, the Preference Hierarchy and other details are according to the set up for Preference Type 39.</li>
<li>If setup for Preference Type 07 is not matching the setup for Preference Type 39, then the preference will not work.</li>
<li>If processing only Preference Type 07, make sure that Product Allocation by Branch (Preference Type 39) is not activated in the Preference Process Options (R40400).  </li>
<li>Product Allocation Hold can only be used in conjunction with Product Allocation preferences, not as a stand-alone hold code.</li>
<li>Product Allocation Hold is typically set up as a Line Basis hold, but will put the entire order on hold.  For example: An order may be entered with 100 lines and only 1 line triggers the Product Allocation Hold. The entire order will be held and the remaining 99 lines cannot be processed until the hold is released.</li>
<li>In the scenario where a user changes a Branch plant on the detail line of an order where the Product Allocation preference has been resolved, the preference will be resolved again and the quantities held in the F40307 table will be retained. This has been tested in the 9.1 release, and assumes that the same version used for the order entry &ndash; where the preference is activated - is also used for the order change. The same is not true of the 8.12 release, where a change in the Branch plant will not call the preference again, and will reset the Quantity Sold (QSLD) field to zero.  </li>
</ul>
<hr />
<p> </p>






<!-- ======================================== End of Body ==================================== -->

  <footer class="panel-footer">
    <div class="container">
      <div class="row">
        <section id="pagebottom" class="pagebottom">
          <!-- <p>"Click Top button to go back to the top"</p> -->
          <button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
          <form>
            <input type="button" value="Go back!" onclick="history.back()">
          </form>
        </section>
      </div>
      <div class="text-center">&copy; Copyright Dong's Page 2019</div>
    </div>
  </footer>

  <!-- jQuery (Bootstrap JS plugins depend on it) -->
  <script src="../js/jquery-2.1.4.min.js"></script>
  <script src="../js/bootstrap.min.js"></script>
  <script src="../js/script.js"></script>
</body>
</html>
