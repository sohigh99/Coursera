<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>How to Output Record Count In Text File through Table Conversion</title>
<!--     <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/styles.css"> -->
    <link href='https://fonts.googleapis.com/css?family=Oxygen:400,300,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Lora' rel='stylesheet' type='text/css'>

    <style>
      body {
        font-family: Calibri, Arial, Helvetica, sans-serif;
/*        background-color: #FFFAFA;*/
/*        font-size: 14px;*/
      }

      #myBtn {
        display: none;
        position: fixed;
        bottom: 20px;
        right: 30px;
        z-index: 99;
        font-size: 18px;*/
        border: none;
        outline: none;
        background-color: #2F4F4F;
        color: white;
        cursor: pointer;
        padding: 15px;
        border-radius: 4px;
      }

      #myBtn:hover {
        background-color: #555;
      }
    </style>

  </head>


<body>
  <header>
    <nav id="header-nav" class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <a href="index.html" class="pull-left visible-md visible-lg">
            <div id="logo-img"></div>
          </a>

          <div class="navbar-brand">
            <a href="../index.html"><h1>Home Page!</h1></a>
          </div>

<!--           <form>
            <input type="button" value="Go back!" onclick="history.back()">
          </form> -->

        </div>
        
      </div><!-- .container -->
    </nav><!-- #header-nav -->
  </header>

<button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>

<div style="background-color:#2F4F4F;color:white;padding:0px"><h1>How to Output Record Count In Text File through Table Conversion</h1></div>
<!-- <div style="background-color:lightgrey;padding:30px 30px 2500px">This example demonstrates how to create a "scroll to top" button that becomes visible when the user starts to scroll the page.</div> -->

<script>
// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    document.getElementById("myBtn").style.display = "block";
  } else {
    document.getElementById("myBtn").style.display = "none";
  }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>

</body>


<!-- <h1 class="km"><big><big><a name="subtitle"></a><span style="font-size: large;"><BIG>Caching in EnterpriseOne</BIG></span></big></big></h1> -->
<!-- ================================= Purpose of Document ================================== -->

<h2 class="km"><big><big><a name="section01"></a><span style="font-size: medium;"><BIG>Purpose of Document</BIG></span></big></big></h2>

<p>This document is to give a simple example to write records count in header of flat / text file output in your Table Conversion. Note that this is case study only and actual coding can be vary to meet your business requirement.</p>
<p>Business scenario:</p>
<p>We have to send out Business Unit information (F0006) per company with below Flat File format:</p>
<ul>
<li>Header: File Name, Record Count of Body</li>
<li>Body: Sequence Number, Business Unit and Description</li>
<li>Trailer / Footer: File name and total number of records (this is common way because we can't warranty all records will be converted)</li>
</ul>
<p>So through this case study, you can put Record Count in Header, Sequence Number in Body and Total Number of Records in Trailer</p>


<!-- ======================================== Body Starts Here =================================== -->

<p>Try this,</p>
<p>1. Create Processing Option data structure</p>
<p><img src="../images/tc01.png" border="0" alt="Processing Option for Grouping" title="Processing Option for Grouping" hspace="0" vspace="0" /></p>
<p>&nbsp;&nbsp; : In case you need to have more complicated selection/grouping you can add additional parameters.</p>
<p>&nbsp;</p>
<p>2. Start Table Conversion Design</p>
<p>3. From Data Conversion Director, choose "Data Conversion"</p>
<p>4. At External Data, Select/Attach Processing Option created from step 1</p>
<p><img src="../images/tc02.png" border="0" alt="Attach Processing Option" title="Attach Processing Option" hspace="0" vspace="0" /></p>
<p>&nbsp;&nbsp; : Now processing option created at step 1 is attached to conversion application.</p>
<p>&nbsp;</p>
<p>5. At Select Input, choose (source SQL format data) Table and drag and drop it to right hand side</p>
<p>6. At Data Selection set selection based on Processing Option value</p>
<p><img src="../images/tc03.png" border="0" alt="Data Selection" title="Data Selection" hspace="0" vspace="0" /></p>
<p>&nbsp;&nbsp;&nbsp; : In case you have more than one parameter, implement it.</p>
<p>&nbsp;</p>
<p>7. At Select Output, select tab (Text File) and type output file name (Path and file name including extension if needed) then click (Push Button) Use to move output to right hand side panel. Currently EnterpriseOne Table Conversion has only a single file name and file name can't be changed dynamically.</p>
<p><img src="../images/tc04.png" border="0" alt="Output" title="Output" hspace="0" vspace="0" /></p>
<p>&nbsp;&nbsp; : As stated above output format is written based on output file name you have defined here so it is your duty to set correct path and file name.</p>
<ul>
<li>To rename, refer to &lt;Document 661013.1&gt; E1: BSFN: How to Check Existence, Copy, Delete or Rename a Flat File?</li>
<li>To set correct path refer to &lt;Document 1305796.1&gt; E1: 47: Representation of Path for EDI in EnterpriseOne.</li>
<li>In case encoding is concerned, refer to &lt;Document 626601.1&gt; E1: TC: Flat File Encoding Configuration P93081 starting with EnterpriseOne 8.9.</li>
</ul>
<p>&nbsp;</p>
<p>8. On same screen, (push button) User Defined Format</p>
<p><img src="../images/tc05.png" border="0" alt="Format" title="Format" hspace="0" vspace="0" /></p>
<p>8-1. At User Defined Format - Type, choose Row Format - Multiple Format - Rows are in two (2) or more formats</p>
<p>8-2. At User Defined Format - Column Delimiter, set the value required (e.g., Textual Qualifier "Double Quotation")</p>
<p>8-3. At User Defined Format - Multiple Format Definition, set 3 (1. Header, 2. Body and 3. Trailer)</p>
<p>8-4. At User Defined Format - Multiple Format Names, set distinctive file name (e.g., 01. Header, 02. Body, 03. Trailer) this enable you to make some coding easily.</p>
<p>8-5. User Defined Format - Column Layout (repeat it for Header, Body and Trailer)</p>
<p><img src="../images/tc06.png" border="0" alt="Header Format" title="Header Format" hspace="0" vspace="0" /></p>
<p><img src="../images/tc07.png" border="0" alt="Body Format" title="Body Format" hspace="0" vspace="0" /></p>
<p><img src="../images/tc08.png" border="0" alt="Trailer Format" title="Trailer Format" hspace="0" vspace="0" /></p>
<p><img src="../images/tc09.png" border="0" alt="Format Summary" title="Format Summary" hspace="0" vspace="0" /></p>
<p>9. At Table Option, select "Clear Output Tables" otherwise values are to be appended based on existing file</p>
<p><img src="../images/tc10.png" border="0" alt="Set Clear Output Option" title="Set Clear Output Option" hspace="0" vspace="0" /></p>
<p>&nbsp;&nbsp; : Not to transmit duplicated information, turn on this option and rename then archive it in the designated folder.</p>
<p>&nbsp;</p>
<p>10. Write Header at Process Begin event</p>
<p><img src="../images/tc11.png" border="0" alt="Process Begin for Header" title="Process Begin for Header" hspace="0" vspace="0" /></p>
<ul>
<li>Tick "Issue a Write for the Event?" to issue 'Insert Row' for Outputs you have defined</li>
<li>Choose events "Process Begin"</li>
<li>Then click "Advanced ER" to write additional logic if needed.</li>
</ul>
<p><img src="../images/tc12.png" border="0" alt="Header Mapping example" title="Header Mapping example" hspace="0" vspace="0" /></p>
<ul>
<li>For this example, this event runs only once like wise Initialized Section in RDA.</li>
<li>Table IO is used to calculate record count.</li>
<li>Two variables are used one is to count rows for Trailer and the other one stores the record count used at Header.</li>
<li>If needed, choose valid index for Table.Select and Table.Fetch Next (for instance, F0006.CO)</li>
</ul>
<p>&nbsp;</p>
<p>12. Write Body at Row Fetched event</p>
<p><img src="../images/tc13.png" border="0" alt="Row Fetched for Body" title="Row Fetched for Body" hspace="0" vspace="0" /></p>
<p><img src="../images/tc14.png" border="0" alt="Body Mapping" title="Body Mapping" hspace="0" vspace="0" /></p>
<ul>
<li>This event gets triggered whenever a new row found likewise Do Section event in RDA (Report Design Aid).</li>
<li>Increase row count which is to be written in Body as Sequence Number and written as total number of line (which is always same with last sequence number) in Trailer</li>
</ul>
<p>&nbsp;</p>
<p>13. Write Trailer at Process End event</p>
<p><img src="../images/tc15.png" border="0" alt="Process End for Trailer" title="Process End for Trailer" hspace="0" vspace="0" /></p>
<p><img src="../images/tc16.png" border="0" alt="Trailer Mapping" title="Trailer Mapping" hspace="0" vspace="0" /></p>
<p>&nbsp;&nbsp; : This event runs only once like End Section event in RDA.</p>
<p>&nbsp;</p>
<p>14. Run it and this is the text file created</p>
<p><img src="../images/tc17.png" border="0" alt="Run it " title="Run it " hspace="0" vspace="0" /></p>
<p>&nbsp;</p>
<p>Note: Though this is a case study and a simple implementation same routine can be expanded for more complicated conversion.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>



<!-- ======================================== End of Body ==================================== -->

  <footer class="panel-footer">
    <div class="container">
      <div class="row">
        <section id="pagebottom" class="pagebottom">
          <!-- <p>"Click Top button to go back to the top"</p> -->
          <button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
          <form>
            <input type="button" value="Go back!" onclick="history.back()">
          </form>
        </section>
      </div>
      <div class="text-center">&copy; Copyright Dong's Page 2019</div>
    </div>
  </footer>

  <!-- jQuery (Bootstrap JS plugins depend on it) -->
  <script src="../js/jquery-2.1.4.min.js"></script>
  <script src="../js/bootstrap.min.js"></script>
  <script src="../js/script.js"></script>
</body>
</html>
