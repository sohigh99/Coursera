<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Error 0252 (Invalid Extended Price) Error Clarification</title>
<!--     <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/styles.css"> -->
    <link href='https://fonts.googleapis.com/css?family=Oxygen:400,300,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Lora' rel='stylesheet' type='text/css'>

    <style>
      body {
        font-family: Calibri, Arial, Helvetica, sans-serif;
/*        background-color: #FFFAFA;*/
/*        font-size: 14px;*/
      }

      #myBtn {
        display: none;
        position: fixed;
        bottom: 20px;
        right: 30px;
        z-index: 99;
        font-size: 18px;*/
        border: none;
        outline: none;
        background-color: #2F4F4F;
        color: white;
        cursor: pointer;
        padding: 15px;
        border-radius: 4px;
      }

      #myBtn:hover {
        background-color: #555;
      }
    </style>

  </head>


<body>
  <header>
    <nav id="header-nav" class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <a href="index.html" class="pull-left visible-md visible-lg">
            <div id="logo-img"></div>
          </a>

          <div class="navbar-brand">
            <a href="../index.html"><h1>Home Page!</h1></a>
          </div>

<!--           <form>
            <input type="button" value="Go back!" onclick="history.back()">
          </form> -->

        </div>
        
      </div><!-- .container -->
    </nav><!-- #header-nav -->
  </header>

<button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>

<div style="background-color:#2F4F4F;color:white;padding:0px"><h1>Error 0252 (Invalid Extended Price) Error Clarification</h1></div>
<!-- <div style="background-color:lightgrey;padding:30px 30px 2500px">This example demonstrates how to create a "scroll to top" button that becomes visible when the user starts to scroll the page.</div> -->

<script>
// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    document.getElementById("myBtn").style.display = "block";
  } else {
    document.getElementById("myBtn").style.display = "none";
  }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>

</body>


<!-- <h1 class="km"><big><big><a name="subtitle"></a><span style="font-size: large;"><BIG>Caching in EnterpriseOne</BIG></span></big></big></h1> -->
<!-- ================================= Purpose of Document ================================== -->

<h2 class="km"><big><big><a name="section01"></a><span style="font-size: medium;"><BIG>Purpose of Document</BIG></span></big></big></h2>

<p>Purpose of this document is to explain the routine of error 0252 (Invalid Extended Price) through business function B4100030 - VerifyQuantityCostExtended (Inventory Trn, Verify Unit Cost vs Extended) in Inventory Transaction, Procurement and Sales Order Processing, which shall cover:</p>
<ul>
<li>Validation routine</li>
<li>Computation routine</li>
</ul>


<!-- ======================================== Body Starts Here =================================== -->

<p> </p>
<p><strong>Table of Contents:</strong></p>
<ul>
<li><a href="#b4100030" alt="B4100030 VerifyQuantityCostExtended" title="B4100030 VerifyQuantityCostExtended">B4100030 VerifyQuantityCostExtended (Inventory Trn, Verify Unit Cost vs Extended)</a>
<ul>
<li><a href="#purpose" alt="Purpose" title="Purpose">Purpose</a></li>
<li><a href="#setup" alt="Setup Notes and Prerequisites" title="Setup Notes and Prerequisites">Setup Notes and Prerequisites</a></li>
<li><a href="#speciallogic" alt="Special Logic" title="Special Logic">Special Logic</a></li>
<li><a href="#parameter" alt="Parameter" title="Parameter">Parameter:</a>
<ul>
<li><a href="#datastructure" alt="Data Structure" title="Data Structure">Data Structure: D4100030 : Verify Quantity Cost Extended</a></li>
</ul>
</li>
<li><a href="#processing" alt="Processing, Detail Routine and Error Handling" title="Processing, Detail Routine and Error Handling">Processing/Detail Routine</a>
<ul>
<li><a href="#input" alt="Check Input Parameters" title="Check Input Parameters">Check Input Parameters</a></li>
<li><a href="#computationdetail" alt="Computation Detail" title="Computation Detail">Computation Detail</a></li>
<li><a href="#error" alt="Error 0252 detail" title="Error 0252 detail">Error 0252 detail</a></li>
<li><a href="#prototype" alt="Prototype of I4100030_Calculate()" title="Prototype of I4100030_Calculate()">Prototype of I4100030_Calculate ()</a></li>
<li><a href="#displaydecimal" alt="Representation of Display Decimal" title="Representation of Display Decimal">Representation of Display Decimal</a></li>
<li><a href="#detailed" alt="Detailed Computation Routine" title="Detailed Computation Routine">Detail Computation Routine</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#xt4111z1" alt="XT4111Z1 and B4100030" title="XT4111Z1 and B4100030">XT4111Z1 and B4100030</a></li>
<li><a href="#typical" alt="Typical Implementation" title="Typical Implementation">Typical Implementation (Example of P4205 (Shipment Confirmation))</a></li>
<li><a href="#direct" alt="Direct Calling of B4100030" title="Direct Calling of B4100030">Direct calling B4100030 (not through XT4111Z1)</a></li>
<li><a href="#applications" alt="List of applications which issue error 0252" title="List of applications which issue error 0252">List of application which can issue error 0252</a></li>
<li><a href="#considerations" alt="Considerations" title="Considerations">Considerations</a></li>
<li><a href="#casestudy" alt="Case Study" title="Case Study">Case Study</a></li>
</ul>
<p> </p>
<p><big><a name="b4100030"></a>B4100030 - VerifyQuantityCostExtended (Inventory Trn, Verity Unit Cost vs Extended)</big></p>
<ul>
<li><strong><a name="purpose"></a>Purpose</strong>: To validate the cost, quantity, extended amount combination for a transaction.  If all three are entered, make sure that it is a valid combination.  If any one is missing, issue an error if necessary or calculate the third field.  If the cost is blank and a quantity is entered, the cost will be retrieved from the F4105.  The cost entered will be converted to primary unit of measure for later functions.</li>
<li><strong><a name="setup"></a>Setup Notes and Prerequisites</strong>: The PRRC field will return the PRIMARY unit cost to be used for later functions.</li>
<li><strong><a name="speciallogic"></a>Special Logic</strong>: Will need to convert the unit cost to primary unit of measure and return in PRRC fields.</li>
<li><strong><a name="parameter"></a>Parameter</strong>: <br />
<ul>
<li><strong><a name="datastructure"></a>Data Structure</strong>: D4100030 : Verify Quantity Cost Extended</li>
</ul>
</li>
</ul>
<table style="width: 1111px; border-collapse: collapse; height: 190px;" border="2" cellspacing="2" cellpadding="1"><colgroup> <col style="width: 159pt;" width="212" /> <col style="width: 88pt;" width="117" /> <col style="width: 48pt;" span="2" width="64" /> <col style="width: 94pt;" width="125" /> <col style="width: 243pt;" width="324" /></colgroup>
<tbody>
<tr style="height: 12.75pt;">
<th style="height: 12.75pt; width: 175px; background-color: #009900; color: white;">Structure Member Name</th>
<th style="width: 78px; background-color: #009900; color: white;">Data Type</th>
<th style="width: 24px; background-color: #009900; color: white;">Req</th>
<th style="width: 12px; background-color: #009900; color: white;">I/O</th>
<th style="width: 47px; background-color: #009900; color: white;">Alias</th>
<th style="width: 655px; background-color: #009900; color: white;">Others</th>
</tr>
<tr style="height: 12.75pt;">
<td style="height: 12.75pt; width: 175px;" height="17">mnTransactionQuantity</td>
<td style="width: 78px;">MATH_NUMERIC</td>
<td style="width: 24px;"> Y</td>
<td style="width: 12px;"> I/O</td>
<td style="width: 47px;">TRQT</td>
<td style="width: 655px;">Transaction Quantity<br /> bIsTRQTZero</td>
</tr>
<tr style="height: 12.75pt;">
<td style="height: 12.75pt; width: 175px;" height="17">mnTransactionUnitCost</td>
<td style="width: 78px;">MATH_NUMERIC</td>
<td style="width: 24px;"> Y</td>
<td style="width: 12px;"> I/O</td>
<td style="width: 47px;">UNCS</td>
<td style="width: 655px;">Amount - Unit Cost<br /> bIsUNCSZero</td>
</tr>
<tr style="height: 12.75pt;">
<td style="height: 12.75pt; width: 175px;" height="17">mnExtendedCost</td>
<td style="width: 78px;">MATH_NUMERIC</td>
<td style="width: 24px;"> Y</td>
<td style="width: 12px;"> I/O</td>
<td style="width: 47px;">PAID</td>
<td style="width: 655px;">Amount - Extended Cost/Price<br /> bIsPAIDZero</td>
</tr>
<tr style="height: 12.75pt;">
<td style="height: 12.75pt; width: 175px;" height="17">mnPrimaryUnitCost</td>
<td style="width: 78px;">MATH_NUMERIC</td>
<td style="width: 24px;"> N</td>
<td style="width: 12px;"> O</td>
<td style="width: 47px;">PRRC</td>
<td style="width: 655px;">Amount - Primary  Unit Cost</td>
</tr>
<tr style="height: 12.75pt;">
<td style="height: 12.75pt; width: 175px;" height="17">mnConversionFactorFromToPrimry</td>
<td style="width: 78px;">MATH_NUMERIC</td>
<td style="width: 24px;"> N</td>
<td style="width: 12px;"> O</td>
<td style="width: 47px;">CONV</td>
<td style="width: 655px;">Conversion Factor From  to Primary</td>
</tr>
<tr style="height: 12.75pt;">
<td style="height: 12.75pt; width: 175px;" height="17">mnConversionFactorPriceToPrim</td>
<td style="width: 78px;">MATH_NUMERIC</td>
<td style="width: 24px;"> Y</td>
<td style="width: 12px;"> I</td>
<td style="width: 47px;">CONV</td>
<td style="width: 655px;">Conversion Factor Price To Primary</td>
</tr>
<tr style="height: 12.75pt;">
<td style="height: 12.75pt; width: 175px;" height="17">cCurrencyControl</td>
<td style="width: 78px;">CHAR</td>
<td style="width: 24px;"> Y</td>
<td style="width: 12px;"> I</td>
<td style="width: 47px;">CRYR</td>
<td style="width: 655px;">Currency Conversion Y/N/Z<br /> This flag is to indicate whether to compute cost for foreign amount.<br /> Default 'N' (different from value from F0009.DOT1 value)<br /> Y when cCalculateForeignAmount is IN ('1', 'y', 'Y')</td>
</tr>
<tr style="height: 12.75pt;">
<td style="height: 12.75pt; width: 175px;" height="17">mnForeignUnitCost</td>
<td style="width: 78px;">MATH_NUMERIC</td>
<td style="width: 24px;"> N</td>
<td style="width: 12px;"> I</td>
<td style="width: 47px;">FCSTR</td>
<td style="width: 655px;">Amount - foreign Unit Cost Received<br /> bIsFCSTRZero</td>
</tr>
<tr style="height: 12.75pt;">
<td style="height: 12.75pt; width: 175px;" height="17">mnForeignExtendedCost</td>
<td style="width: 78px;">MATH_NUMERIC</td>
<td style="width: 24px;"> N</td>
<td style="width: 12px;"> I</td>
<td style="width: 47px;">FOPNR</td>
<td style="width: 655px;"> Foreign Extended Cost<br /> bIsFOPNRZero</td>
</tr>
<tr style="height: 12.75pt;">
<td style="height: 12.75pt; width: 175px;" height="17">mnPrimaryTransactionQuantity</td>
<td style="width: 78px;">MATH_NUMERIC</td>
<td style="width: 24px;"> N</td>
<td style="width: 12px;"> I</td>
<td style="width: 47px;">QAVAL</td>
<td style="width: 655px;"> Primary Transaction Quantity</td>
</tr>
<tr style="height: 12.75pt;">
<td style="height: 12.75pt; width: 175px;" height="17">mnQuantityConvertedToPrimary</td>
<td style="width: 78px;">MATH_NUMERIC</td>
<td style="width: 24px;"> N</td>
<td style="width: 12px;"> I</td>
<td style="width: 47px;">QTY</td>
<td style="width: 655px;"> Quantity Converted To Primary</td>
</tr>
</tbody>
</table>
<ul>
<li>  <a name="processing"></a>Processing/Detail Routine/Error handling:</li>
</ul>
<p>The following edits will be performed.<br /> <span style="font-weight: bold;"><a name="input"></a>Check input parameters:</span></p>
<ul>
<li> Error <span style="font-weight: bold;">'0003 - Blanks Invalid'</span> stops the processing</li>
<ul>
<li>One of the three fields (transaction quantity (mnTransactionQuantity), unit cost (mnTransactionUnitCost), extended cost (mnExtendedCost)).  If not (all 3 parameters are not specified) , issue error '0003'.</li>
<li>If only the unit cost (mnTransactionUnitCost) is entered (but (mnTransactionQuantity = 0 AND (mnExtendedCost = 0)), issue error '0003'.</li>
<li>If cost ((mnTransactionUnitCost &lt;&gt; 0) and extended (mnExtendedCost &lt;&gt; 0) are entered, but no quantity (mnTransactionQuantity = 0) , issue error '0003'.</li>
</ul>
</ul>
<ul>
<li>Issue error '<span style="font-weight: bold;">0252 - Extended Price Invalid</span>' and stops the processing when the quantity and extended cost fields have opposite signs.  Issue error '0252'. For this example, quantity * Unit Cost = Extended Cost so,</li>
<ul>
<li>(mnTransactionQuantity &lt; 0) AND (mnTransactionUnitCost &lt; 0) AND (mnExtendedCost &lt;0) (because Negative * Negative = Positive)</li>
<li>OR (mnTransactionQuantity &gt; 0) AND (mnTransactionUnitCost &gt; 0) AND (mnExtendedCost &lt;0) (because Positive * Positive = Positive)</li>
<li>OR (mnTransactionQuantity &lt; 0) AND (mnTransactionUnitCost &gt; 0) AND (mnExtendedCost &gt; 0) (because Negative * Positive = Negative)</li>
</ul>
</ul>
<hr />
<p> </p>
<p style="font-weight: bold;"><a name="computationdetail"></a>Computation Detail:</p>
<table style="width: 1123px; border-collapse: collapse; height: 342px;" border="2" cellspacing="2" cellpadding="1"><colgroup> <col style="width: 115pt;" width="153" /> <col style="width: 108pt;" width="144" /> <col style="width: 81pt;" width="108" /> <col style="width: 403pt;" width="537" /></colgroup>
<tbody>
<tr style="height: 12.75pt;">
<th style="vertical-align: top; background-color: #009900; color: white;">Case</th>
<th style="height: 12.75pt; width: 77px; background-color: #009900; color: white;">mnTransactionUnitCost </th>
<th style="width: 61px; background-color: #009900; color: white;">mnTransactionQuantity</th>
<th style="width: 28px; background-color: #009900; color: white;">mnExtendedCost</th>
<th style="width: 803px; background-color: #009900; color: white;">Action to Take</th>
</tr>
<tr style="height: 12.75pt;">
<td style="vertical-align: middle;">1</td>
<td style="height: 12.75pt; width: 77px;" height="17">&lt;&gt; 0</td>
<td style="width: 61px;">&lt;&gt; 0</td>
<td style="width: 28px;">&lt;&gt; 0</td>
<td style="width: 803px;">
<ul>
<li style="font-weight: bold;">Make sure they are balanced each other</li>
<li>(mnTransactionUnitCost / mnConversionFactorFromToPrimary) * mnPrimaryTransactionQuantity = mnExtendedCost</li>
<li>If above it not balanced then,</li>
<ul>
<li>mnExtendedCost / mnPrimaryTransactionQuantity = mnTransactionUnitcost / mnConversionFactorFromToPrimary</li>
<li>If above is not in balance then <span style="color: red; font-weight: bold;">set error '0252'</span></li>
</ul>
<li>Note that the currency value will only be for Extended Cost</li>
</ul>
</td>
</tr>
<tr style="height: 12.75pt;">
<td style="vertical-align: middle;">2</td>
<td style="height: 12.75pt; width: 77px;" height="17">&lt;&gt; 0</td>
<td style="width: 61px;">&lt;&gt; 0</td>
<td style="width: 28px; background-color: #cccccc;">= 0</td>
<td style="width: 803px;">
<ul>
<li style="font-weight: bold;">Calculate mnExtendedCost</li>
<ul>
<li>mnExtendedCost  = (mnTransactionUnitcost / mnConversionFacdtorFromToPrimary) * mnQuantityConvrtedToPrimary</li>
<li>(for currency) mnForeignExtendedCost = (mnForeignUnitCost / mnConversionFactorFromToPrimary) / mnQuantityConvertedToPrimary</li>
</ul>
</ul>
Note: ConversionFactorFromToPrimry should be used instead of ConversionFactorFromPriceToPrimary; since all the transaction extended cost is based on transaction uom to primary uom</td>
</tr>
<tr>
<td style="vertical-align: middle;">3</td>
<td style="vertical-align: top;">&lt;&gt; 0</td>
<td style="vertical-align: top;">= 0</td>
<td style="vertical-align: top;">= 0</td>
<td style="vertical-align: top;">Set Error '0003'</td>
</tr>
<tr>
<td style="vertical-align: middle;">4</td>
<td style="vertical-align: top; background-color: #cccccc;">= 0</td>
<td style="vertical-align: top;">&lt;&gt; 0</td>
<td style="vertical-align: top;">&lt;&gt; 0</td>
<td style="vertical-align: top;">
<ul>
<li style="font-weight: bold;">Calculate mnTransactionUnitCost</li>
<ul>
<li>mnTransactionUnitCost = {(mnExtendedCost<span style="font-weight: bold;">/</span>mnTransactionQuantity) /mnConversionFactorFromToPrimry} * mnConversionFactorPriceToPrim</li>
<li>(for currency) mnForeignUnitCost = {(mnForeignExtendedCost<span style="font-weight: bold;"> / </span>mnTransactionQuantity) / mnConversionFactorFromToPrimry} * mnConversionFactorPriceToPrim</li>
</ul>
</ul>
</td>
</tr>
<tr>
<td style="vertical-align: middle;">5</td>
<td style="vertical-align: top;">&lt;&gt; 0</td>
<td style="vertical-align: top;">= 0</td>
<td style="vertical-align: top;">= 0</td>
<td style="vertical-align: top;">Set Error '0003'</td>
</tr>
<tr>
<td style="vertical-align: middle;">6</td>
<td style="vertical-align: top;">= 0</td>
<td style="vertical-align: top;">= 0</td>
<td style="vertical-align: top;">= 0</td>
<td style="vertical-align: top;">Set Error '0003'</td>
</tr>
</tbody>
</table>
<p> </p>
<div class="kmnotebox">
<p>Note:</p>
<ul>
<li>Simplified routine can be found at P98ABSFN (Business Function Documentation Viewer) or P98652 (Business Function Search)</li>
<li>Most errors are coming from case 1 because 3 parameters are computed through calling routines</li>
<li>Depends on parameters assigned.   The routine to compute is different so verify whether the parameters are handled correctly when you face error '0252'</li>
<li>Only Round the result when the currency flag is on and there are values other than '1' in the Divisor</li>
<li>Computation repeats by calling Internal Function I4100030_Calculate ()</li>
</ul>
</div>
<hr />
<p> </p>
<p><span style="font-weight: bold;"><a name="error"></a>Error 0252 detail:</span></p>
<div style="margin-left: 40px;"><strong>Extended Price Invalid</strong></div>
<p style="margin-left: 60px;">Cause. . . . . The Extended Price entered is incorrect.  The Extended Price<br />                should equal the number of units multiplied by the unit price.<br /> Resolution . . Correct the Extended Price or blank out your entry and let the<br />                system calculate the Extended Price. </p>
<hr />
<p><br style="font-weight: bold;" /> <span style="font-weight: bold;"><a name="prototype"></a>Prototype of I4100030_Calculate ()</span><br /> Prototype of calculation is,</p>
<p style="margin-left: 60px;">void  I4100030_Calculate ( LPBHVRCOM lpBhvrCom, LPVOID lpVoid,<br />                            LPMATH_NUMERIC <span style="font-weight: bold; color: red;">lpmnDiv1</span>, <br />                            LPMATH_NUMERIC <span style="font-weight: bold; color: #000099;">lpmnDiv2</span>,<br />                            LPMATH_NUMERIC <span style="color: #006600; font-weight: bold;">lpmnDiv3</span>, <br />                            LPMATH_NUMERIC <span style="font-weight: bold; color: #cc33cc;">lpmnMult,</span><br />                            LPMATH_NUMERIC lpmnResult, <br />                            LPMATH_NUMERIC lpmnCurrency,<br />                            JCHAR cUnitCost ) /* to indicate whether lpmnResult is Unit Cost or not. If value is 1 then display decimal is same with display decimal of UNCS */<br /> {<br /> <br />    MathDivide ( <span style="font-weight: bold; color: #cc6600;">&amp;mnDivResult</span>, &amp;mnRemainder,<span style="font-weight: bold;"> <span style="color: red;">lpmnDiv1</span>, <span style="color: #000099;">lpmnDiv2</span></span>,&amp;nDecimals, &amp;nRoundFlag ) ; <span style="font-style: italic;">/* &amp;mnDivResult = (lpmnDiv1 / lpmnDiv2) + &amp;mnRemainder */</span><br />    MathDivide ( <span style="font-weight: bold;">&amp;mnDivResult</span>, &amp;mnRemainder, <span style="font-weight: bold;"><span style="color: #cc6600;">&amp;mnDivResult</span>, <span style="color: #006600;">lpmnDiv3</span></span>, &amp;nDecimals, &amp;nRoundFlag ) ;   <span style="font-style: italic;">/* &amp;mnDivResult = (mnDivResult/lpmnDiv3) + &amp;mnRemainder */</span><br />    MathMultiply ( lpmnResult, <span style="font-weight: bold;">&amp;mnDivResult</span>, <span style="color: #cc33cc; font-weight: bold;">lpmnMult</span> ) ; <span style="font-style: italic;">/* lpmnResult = &amp;mnDivResult * lpmnMult */</span><br />  }</p>
<p> </p>
<div class="kmnotebox">
<p>Note:</p>
<ul>
<li>MathDivide(&amp;mnQuotient, &amp;mnRemainder, &amp;mnMathOne,&amp;mnMathTwo, &amp;nDecimals, &amp;nRoundFlag);</li>
<ul>
<li> &amp;mnQuotient = (&amp;mnMathOne / &amp;mnMathTwo) + &amp;mnRemainder</li>
<li>  Set display decimal (Number of decimals to round to)</li>
<li>  Determine rounding (1 = No; 0 = Yes)</li>
</ul>
<li>MathMultiply ( lpmnResult, &amp;mnDivResult, lpmnMult );</li>
<ul>
<li>  lpmnResult = &amp;mnDivResult * lpmnMult</li>
</ul>
</ul>
</div>
<hr />
<p><br /> <span style="font-weight: bold;"><a name="displaydecimal"></a>Represenation of Display Decimal</span><br /> Depends on the last parameter cUnitCost</p>
<table style="width: 466px; border-collapse: collapse; height: 62px;" border="2" cellspacing="2" cellpadding="1"><colgroup> <col style="width: 115pt;" width="153" /> <col style="width: 108pt;" width="144" /></colgroup>
<tbody>
<tr style="height: 12.75pt;">
<th style="height: 12.75pt; width: 142px; background-color: #cccccc;">cUnitCost</th>
<th style="width: 320px; background-color: #cccccc;">Display Decimal</th>
</tr>
<tr style="height: 12.75pt;">
<td style="height: 12.75pt; width: 142px;" height="17">1</td>
<td style="width: 320px;">Indicate return value is Unit Cost Value. Display Decimal is same with DD display decimal for UNCS</td>
</tr>
<tr style="height: 12.75pt;">
<td style="height: 12.75pt; width: 142px;" height="17">0 &amp; (Multi-Currency)</td>
<td style="width: 320px;">For foreign extended amount set currency display decimal defined at F0013</td>
</tr>
<tr>
<td style="vertical-align: top;">0 &amp; Non-currency</td>
<td style="vertical-align: top;">Display Decimal of DD Alias PAID</td>
</tr>
</tbody>
</table>
<hr />
<p><br /> <br /> <br /> <span style="font-weight: bold;"><a name="detailed"></a>Detail computation routine:</span><br /> <span style="font-weight: bold;">Case 1:</span> (quantity, unit cost and extended cost)<br />        I4100030_Calculate ( lpBhvrCom, lpVoid,<br />                            &amp;lpDS-&gt;mnTransactionUnitCost,     <span style="font-style: italic;">/* (Div1) */</span><br />                            &amp;lpDS-&gt;mnConversionFactorFromToPrimry,     <span style="font-style: italic;">/* (Div2) */</span><br />                            &amp;mnOne,     <span style="font-style: italic;">/* (Div3) */</span><br />                            &amp;lpDS-&gt;mnPrimaryTransactionQuantity, <span style="font-style: italic;">    /* (multi) */</span><br />                            &amp;mnCost1,    <span style="font-style: italic;">/* (result) */</span><br />                            &amp;mnOne,     <span style="font-style: italic;">/* (currency) Y or Z for foreign amount computation */</span><br />                            _J('0') ) ;  <span style="font-style: italic;">    /* (cUnitCost) */</span></p>
<div style="margin-left: 80px;">1st. mnDivResult = mnTransactionUnitCost<span style="font-weight: bold;">/</span>mnConversionFactorFromToPrimry<br /> 2nd. mnDivResult = (mnTransactionUnitCost<span style="font-weight: bold;">/</span>mnConversionFactorFromToPrimry)/1<br /> 3rd. mnCost1 = {(mnTransactionUnitCost<span style="font-weight: bold;">/</span>mnConversionFactorFromToPrimry)/1} * mnPrimaryTransactionQuantity = <span style="text-decoration: underline;">(mnTransactionUnitCost / mnConversionFactorFromToPrimary) * mnPrimaryTransactionQuantity</span></div>
<p><br /> Is mnCost1 = mnExtendedCost?</p>
<ul>
<li>Yes (then exit from routine, or validation success)</li>
<li>No (continue below)</li>
</ul>
<p><br />          I4100030_Calculate ( lpBhvrCom, lpVoid,<br />                               &amp;lpDS-&gt;mnExtendedCost,     <span style="font-style: italic;">/* (Div1) */</span><br />                               &amp;lpDS-&gt;mnPrimaryTransactionQuantity, <span style="font-style: italic;">    /* (Div2) */</span><br />                               &amp;mnOne,     <span style="font-style: italic;">/* (Div3) */</span><br />                               &amp;mnOne,     <span style="font-style: italic;">/* (Multi) */</span><br />                               &amp;mnCost1,     <span style="font-style: italic;">/* (result) */</span><br />                               &amp;mnOne,     <span style="font-style: italic;">/* (currency) */</span><br />                               _J('1') ) ;  <span style="font-style: italic;">    /* (cUnitCost) */</span></p>
<div style="margin-left: 80px;">1st. mnDivResult = mnExtendedCost / mnPrimaryTransactionQuantity<br /> 2nd. mnDivResult = (mnExtendedCost / mnPrimaryTransactionQuantity)/1<br /> 3rd. <span style="font-weight: bold; color: red;">mnCost1</span> = {(mnExtendedCost / mnPrimaryTransactionQuantity)/1} * 1 = <span style="text-decoration: underline;">mnExtendedCost / mnPrimaryTransactionQuantity</span></div>
<p><br /> <br />          I4100030_Calculate ( lpBhvrCom, lpVoid,<br />                               &amp;lpDS-&gt;mnTransactionUnitCost,     <span style="font-style: italic;">/* (Div1) */</span><br />                               &amp;lpDS-&gt;mnConversionFactorFromToPrimry,     <span style="font-style: italic;">/* (Div2) */</span><br />                               &amp;mnOne,     <span style="font-style: italic;">/* (Div3) */</span><br />                               &amp;mnOne,     <span style="font-style: italic;">/* (multi) */</span><br />                               &amp;mnCost2,     <span style="font-style: italic;">/* (result) */</span><br />                               &amp;mnZero,     <span style="font-style: italic;">/* (currency) */</span><br />                               _J('1')  ) ;     <span style="font-style: italic;">/* (cUnitCost) */</span></p>
<div style="margin-left: 80px;">4th. mnDivResult = mnTransactionUnitCost<span style="font-weight: bold;">/</span>mnConversionFactorFromToPrimry<br /> 5th. mnDivResult = (mnTransactionUnitCost<span style="font-weight: bold;">/</span>mnConversionFactorFromToPrimry )/ 1<br /> 6th. <span style="font-weight: bold; color: #000099;">mnCost2</span> = {(mnTransactionUnitCost<span style="font-weight: bold;">/</span>mnConversionFactorFromToPrimry )/ 1} * 1 = <span style="text-decoration: underline;">mnTransactionUnitcost / mnConversionFactorFromToPrimary</span></div>
<p><br /> If <span style="color: red; font-weight: bold;">mnCost1</span> &lt;&gt; <span style="color: #000099; font-weight: bold;">mnCost2</span>, set error '<span style="font-weight: bold; color: red;">0252</span>' which is common error in Inventory Transaction. <br /> <br /> <span style="font-weight: bold;">Case 4:</span> (quantity and extended cost are specified)<br /> Extended cost need to be rounded before calculating the unit cost<br />          I4100030_Calculate ( lpBhvrCom, lpVoid,<br />                               &amp;lpDS-&gt;mnExtendedCost,     <span style="font-style: italic;">/* (Div1) */</span><br />                               &amp;lpDS-&gt;mnTransactionQuantity,     <span style="font-style: italic;">/* (Div2) */</span><br />                               &amp;lpDS-&gt;mnConversionFactorFromToPrimry,     <span style="font-style: italic;">/* (Div3) */</span><br />                               &amp;lpDS-&gt;mnConversionFactorPriceToPrim,     <span style="font-style: italic;">/* (Multi) */</span><br />                               &amp;lpDS-&gt;mnTransactionUnitCost,     <span style="font-style: italic;">/* (result) */</span><br />                               &amp;mnZero,     <span style="font-style: italic;">/* (currency) */</span><br />                                _J('1') ) ;     <span style="font-style: italic;">/* (cUnitCost) */</span></p>
<div style="margin-left: 80px;">1st. mnDivResult = mnExtendedCost<span style="font-weight: bold;">/</span>mnTransactionQuantity<br /> 2nd. mnDivResult = (mnExtendedCost<span style="font-weight: bold;">/</span>mnTransactionQuantity) / mnConversionFactorFromToPrimry<br /> 3rd. mnTransactionUnitCost = <span style="text-decoration: underline;">{(mnExtendedCost</span><span style="font-weight: bold; text-decoration: underline;">/</span><span style="text-decoration: underline;">mnTransactionQuantity) / mnConversionFactorFromToPrimry} * mnConversionFactorPriceToPrim</span></div>
<p>                                        <br />          (Compute Foreign Amount)<br />          I4100030_Calculate ( lpBhvrCom, lpVoid,<br />                               &amp;lpDS-&gt;mnForeignExtendedCost,     <span style="font-style: italic;">/* (Div1) */</span><br />                               &amp;lpDS-&gt;mnTransactionQuantity,     <span style="font-style: italic;">/* (Div2) */</span><br />                               &amp;lpDS-&gt;mnConversionFactorFromToPrimry,     <span style="font-style: italic;">/* (Div3) */</span><br />                               &amp;lpDS-&gt;mnConversionFactorPriceToPrim,     <span style="font-style: italic;">/* (multi) */</span><br />                               &amp;lpDS-&gt;mnForeignUnitCost,     <span style="font-style: italic;">/* (result) */</span><br />                               &amp;mnZero,     <span style="font-style: italic;">/* (currency) */</span><br />                               _J('1') ) ;     <span style="font-style: italic;">/* (cUnitCost) */</span></p>
<div style="margin-left: 80px;">1st. mnDivResult = mnForeignExtendedCost<span style="font-weight: bold;"> / </span>mnTransactionQuantity<br /> 2nd. mnDivResult = (mnForeignExtendedCost<span style="font-weight: bold;"> / </span>mnTransactionQuantity) / mnConversionFactorFromToPrimry<br /> 3rd. mnForeignUnitCost = <span style="text-decoration: underline;">{(mnForeignExtendedCost</span><span style="font-weight: bold; text-decoration: underline;"> / </span><span style="text-decoration: underline;">mnTransactionQuantity) / mnConversionFactorFromToPrimry} * mnConversionFactorPriceToPrim</span></div>
<p><br /> <br /> <span style="font-weight: bold;">Case 2:</span> (quantity and unit cost are specified)<br />          I4100030_Calculate ( lpBhvrCom, lpVoid,<br />                               &amp;lpDS-&gt;mnTransactionUnitCost,     <span style="font-style: italic;">/* (Div1) */</span><br />                               &amp;lpDS-&gt;mnConversionFactorFromToPrimry,    <span style="font-style: italic;"> /* (Div2) */</span><br />                               &amp;mnOne,     <span style="font-style: italic;">/* (Div3) */</span><br />                               &amp;lpDS-&gt;mnQuantityConvertedToPrimary,     <span style="font-style: italic;">/* (multi) */</span><br />                               &amp;lpDS-&gt;mnExtendedCost,    <span style="font-style: italic;"> /* (result) */</span><br />                               &amp;mnOne,     <span style="font-style: italic;">/* (currency) */</span><br />                               _J('0') ) ;     <span style="font-style: italic;">/* (cUnitCost) */</span></p>
<div style="margin-left: 80px;">1st. mnDivResult = mnTransactionUnitCost<span style="font-weight: bold;">/</span>mnConversionFactorFromToPrimry<br /> 2nd. mnDivResult = (mnTransactionUnitCost<span style="font-weight: bold;">/</span>mnConversionFactorFromToPrimry) / 1<br /> 3rd. mnExtendedCost = {(mnTransactionUnitCost<span style="font-weight: bold;">/</span>mnConversionFactorFromToPrimry) / 1} * mnQuantityConvertedToPrimary = <span style="text-decoration: underline;">(mnTransactionUnitcost / mnConversionFacdtorFromToPrimary) * mnQuantityConvrtedToPrimary</span></div>
<p><br /> <br />         I4100030_Calculate ( lpBhvrCom, lpVoid,<br />                               &amp;lpDS-&gt;mnForeignUnitCost,     <span style="font-style: italic;">/* (Div1) */</span><br />                               &amp;lpDS-&gt;mnConversionFactorFromToPrimry,     <span style="font-style: italic;">/* (Div2) */</span><br />                               &amp;mnOne,     <span style="font-style: italic;">/* (Div3) */</span><br />                               &amp;lpDS-&gt;mnQuantityConvertedToPrimary,     <span style="font-style: italic;">/* (multi) */</span><br />                               &amp;lpDS-&gt;mnForeignExtendedCost,     <span style="font-style: italic;">/* (result) */</span><br />                               &amp;mnForOne,     <span style="font-style: italic;">/* (currency) */</span><br />                               _J('0') ) ;     <span style="font-style: italic;">/* (cUnitCost) */</span></p>
<div style="margin-left: 80px;">1st. mnDivResult = mnForeignUnitCost<span style="font-weight: bold;">/</span>mnConversionFactorFromToPrimry<br /> 2nd. mnDivResult = (mnForeignUnitCost<span style="font-weight: bold;">/</span>mnConversionFactorFromToPrimry) / 1<br /> 3rd. mnForeignExtendedCost = {(mnForeignUnitCost<span style="font-weight: bold;">/</span>mnConversionFactorFromToPrimry) / 1}* mnQuantityConvertedToPrimary = <span style="text-decoration: underline;">(mnForeignUnitCost / mnConversionFactorFromToPrimary) / mnQuantityConvertedToPrimary</span></div>
<p><br /> then validate again:<br />       I4100030_Calculate ( lpBhvrCom, lpVoid,<br />                            &amp;lpDS-&gt;mnTransactionUnitCost,<br />                            &amp;lpDS-&gt;mnConversionFactorFromToPrimry, <br />                            &amp;mnOne,<br />                            &amp;mnOne, <br />                            &amp;lpDS-&gt;mnPrimaryUnitCost, <br />                            &amp;mnZero, <br />                            _J('1') ) ;</p>
<div style="margin-left: 80px;">1st. mnDivResult = mnTransactionUnitCost / mnConversionFactorFromToPrimry<br /> 2nd. mnDivResult = (mnTransactionUnitCost / mnConversionFactorFromToPrimry) / 1<br /> 3rd. mnPrimaryUnitCost = {(mnTransactionUnitCost / mnConversionFactorFromToPrimry) / 1} * 1 = <span style="text-decoration: underline;">mnTransactionUnitCost / mnConversionFactorFromToPrimary</span></div>
<p><br />      If mnPrimaryUnitCost &lt;&gt; mnTransactionUnitCost / mnConversionFactorFromToPrimary then set error 0252</p>
<hr />
<p> </p>
<p><big><a name="xt4111z1"></a>XT4111Z1 and B4100030</big></p>
<p> All inventory transaction calls XT4111Z1 to validate inventory and create its cache (F41UI11) and XT4111Z1 calls B4100030 to validate. As written at &lt;Document 1276239.1&gt; - E1: 41: Inventory Transaction MBF XT4111Z1 Clarification, all inventory transaction calls B4100030 (refer to parameter cCalculateQtyCostExt in  section "How data gets validated?" in this document) except  for R41413 (Cycle Count Update) and R41610 (Tag Inventory Update).</p>
<p>Simplified routine for  IX4111Z1_CalculateUnitCost(..)</p>
<ul>
<li>If Transaction Unit Cost and Transaction Extended Cost passed in equal zero,</li>
<ul>
<li>    Transaction Unit Cost = Inventory Unit Cost (iticos) * ConversionFactorFromToPrimary</li>
</ul>
<li>If Foreign Unit Cost and Foreign Extended Cost passed in equal zero,</li>
<ul>
<li>    Foreign Unit Cost = Inventory Unit Cost (iticos) * ConversionFactorFromToPrimary</li>
</ul>
<li>Call VerifyQuantityCostExtended(...) using ConversionFactor from</li>
<ul>
<li>    GetItemUOMCoversionFactor(..).</li>
<li>    Retrieve UNCS, TRQT, PAID, PRRC, FCSTR, and FOPNR for F41UI001</li>
<li>    Retrieve TRQT, PAID, UNC, FCSTR, and FOPNR for lpDS</li>
</ul>
</ul>
<hr />
<p> </p>
<p><big><a name="typical"></a>Typical Implementation (Example of P4205 Shipment Confirmation):</big></p>
<p>This section is to explain what we need to check in hitting error '0252' during Shipment Confirmation.</p>
<p>P4205 - Shipment Confirmation<br />     |--- N4200790 - F42UI05EditLine (F42UI05 Edit Line)<br />           |--- XT4111Z1 - F4111EditLine (F4111 Edit Line)<br />                    |--- B4100030 - VerifyQuantityCostExtended (Inventory Trn, Verify Unit Cost vs Extended) </p>
<div class="kmnotebox">
<p>Note:</p>
<ul>
<li>If you face errors in running a certain Inventory Transaction, review how the BSFN B4100030 gets called</li>
<li>If possible, capture CallObject Kernel log (JDEDEBUG_*.log) and verify each Input and Output parameter</li>
<li>Even in same application, this function can be called multiple times to validate and compute different values so try to understand this in the transaction</li>
</ul>
</div>
<hr />
<p> </p>
<p><big><a name="direct"></a>Direct calling B4100030 (not through XT4111Z1)</big><br /> As explained above B4100030 is normally getting called by Inventory Transaction Master Business Function XT4111Z1 except for PO receipt transaction. B4100030 is to be called only when user made change in quantity, unit cost and/or extended cost during PO Receipt.</p>
<p>cf., B4002000 - ComputeUnitOrExtendedAmount (Order, Calculate Unit or Extended Amount) which can be called across Order Processing. This business function also can issue error '0252 - Extended Price Invalid' or '4377 - Invalid Input Parameter'. Currently this supports different cModeOfProcessing (1 to compute Unit Price, 2 to compute extended amount and 3 to validate quantity, Unit Price and Extended Amount).</p>
<p>For this example, XT4312Z2 can be called either from PO Receipt (e.g., P4312) or Receipt Routing (P43250). In case the outcome between 2 transactions are different from each other, check whether all the parameters are assigned same or not  <br /> <br /> P4312 - Purchase Order Receipt<br /> (Row is Exited/Changed Asynch)<br />     |--- XT4312Z1 - F4312EditLine (F43121 Edit Line) which is XT4312Z2 - F4312EditLineInternalFunctions (F4312 Edit Line Internal Functions)<br />         |--- IXT4312Z1_EL_F4111EditLine (Internal function before it calls F4111EditLine so PO receipt routine is different from other inventory transactions)<br />             |--- IXT4312Z1_EL_AssignQtyAmtCst (Internal function to compute amount and cost)<br />                 |--- IXT4312Z1_EL_CalculateAmounts (before calling XT4111Z1 so quantity, unit cost and extended cost value for XT4111Z1 and B4100030 are identical)<br />                 |--- VerifyQuantityCostExtended</p>
<hr />
<p> </p>
<p><big><a name="applications"></a>List of applications which can issue error '0252'</big><br /> Applications listed below can issue error code '0252'. In case the error message is coming from P4312 or P43250 check F4312EditLine, F4111EditLine and B400030 otherwise check F4111EditLine to determine the cause of your issue.</p>
<ul>
<li>P4312 (PO Receipts)</li>
<li>P43250 (Receipt Routing Movement and Disposition)</li>
<li>P4205 (Shipment Confirmation)</li>
<li>P49640 (Transportation Load Confirmation)</li>
<li>P4314 (Voucher Match)</li>
</ul>
<hr />
<p><br /> <br /> <big><a name="considerations"></a>Considerations</big></p>
<ul>
<li>Check currency display decimal (for example, JPY, TWD and KRW which has 0 display decimal) the result can be different from other currency amount</li>
<li>Check display decimal for columns belong to QTYINV class which results in different result</li>
<li>Partial Receipt and Partial Shipment because it has to compute amount based on partially received or shipped quantity</li>
<li>PO receipt reversal including sign of values</li>
</ul>
<hr />
<p> </p>
<p><br /> <br /> <big><a name="casestudy"></a>Case Study</big></p>
<p>As described above B4100030 - VerifyQuantityCostExtended (Inventory Trn, Verify Unit Cost vs Extended) can be called either through F4111EditLine or F4312EditLine. So below example may enable you to debug your issue in running any Inventory Transaction.</p>
<p><span style="font-weight: bold;">Example 1:</span><br /> In running P49640 (Transportation Load Confirmation) user hits error '0252'.</p>
<p>To debug this issue better,</p>
<p>1. Capture/trace CallObject Kernel Log (namely, jdedebug.log), which reads,</p>
<div style="margin-left: 80px;">P49640 (Transportation Load Confirmation)<br />     |--- N4900780 - LoadConfirmEditLine (Load Confirm Edit Line)<br />         |--- XT4111Z1 - F4111EditLine (F4111 Edit Line)<br />             |--- B4100030 - VerifyQuantityCostExtended (Inventory Trn, Verify Unit Cost vs Extended)</div>
<p><br /> 2. Detail parameters for the issue</p>
<div style="margin-left: 40px;">Calling Business function <span style="font-weight: bold; text-decoration: underline;">LoadConfirmEditLine</span> from Level 1 for JDE. Application Name [P49640], Version [ZJDE0001] (BSFNLevel = 1) <br /> ...<br /> IN-&gt;[ 15] mnQuantityTransaction            [5000.0000] <br /> IN-&gt;[ 16] szUnitOfMeasureTransact          [LT] <span style="color: #3333ff; font-style: italic;"> *** ORCL: 3 parameters in F4111EditLine (mnTransactionUnitCost, mnTransactionUnitCost and mnTransactionExtendedCost are computed by LoadConfirmEditLine ***</span><br />
<div style="margin-left: 40px;">...<br /> Calling Business function <span style="text-decoration: underline; font-weight: bold;">F4111EditLine</span> from LoadConfirmEditLine for JDE. Application Name [P49640], Version [ZJDE0001] (BSFNLevel = 2) <br /> ...<br /> IN-&gt;[  7] szTransactionUOM                 [LT] <br /> IN-&gt;[  8] mnTransactionQuantity            [-5000.0000] <br /> IN-&gt;[  9] mnTransactionUnitCost            [83.0200]  <span style="font-style: italic; color: #3333ff;">*** ORCL: This parameter is retrieved/computed through LoadConfirmEditLine ***</span><br /> IN-&gt;[ 10] mnTransactionExtendedCost        [0] <br /> ...<br /> IN-&gt;[ 49] szPriceCostUOM                   [] <br /> IN-&gt;[ 50] mnConversionFactorFromToPrimry   [0] <br /> IN-&gt;[ 51] mnConversionFactorPriceToPrim    [0] <br /> IN-&gt;[ 52] mnTransactionForeignUnitCost     [0] <br /> IN-&gt;[ 53] mnTransactionForeignExtendCost   [0] <br /> ...<br />
<div style="margin-left: 40px;">Calling Business function <span style="text-decoration: underline; font-weight: bold;">VerifyQuantityCostExtended</span> from F4111EditLine for JDE. Application Name [P49640], Version [ZJDE0001] (BSFNLevel = 3) <br /> IN-&gt;[  1] <span style="font-style: italic; color: red;">mnTransactionQuantity</span>            [-15000]  <span style="font-style: italic; color: #3333ff;">*** ORCL: For this example, each compartments can hold 5000 LT and this routine is combined figure ***</span><br /> IN-&gt;[  2] <span style="color: red; font-style: italic;">mnTransactionUnitCost           </span> [83.020000000000000000]  <span style="font-style: italic; color: #3333ff;">*** ORCL: F4111EditLine.mnTransactionUnitCost which is assigned by LoadConfirmEditLine *** </span><br /> IN-&gt;[  3] <span style="color: red; font-style: italic;">mnExtendedCost                  </span> [-1260900]  <span style="font-style: italic; color: #3333ff;">*** ORCL: this value is computed through F4111EditLine routine ***</span><br /> IN-&gt;[  4] mnPrimaryUnitCost                [0] <br /> IN-&gt;[  5] mnConversionFactorFromToPrimry   [1]  <span style="font-style: italic; color: #3333ff;">*** ORCL: this value are handled by F4111EditLine ***</span><br /> IN-&gt;[  6] mnConversionFactorPriceToPrim    [1]  <span style="font-style: italic; color: #3333ff;">*** ORCL: this value are handled by F4111EditLine ***</span><br /> IN-&gt;[  7] cCurrencyControl                 [N]  <span style="font-style: italic; color: #3333ff;">*** ORCL: this value are handled by F4111EditLine ***</span><br /> IN-&gt;[  8] mnForeignUnitCost                [83.02] <br /> IN-&gt;[  9] mnForeignExtendedCost            [.00] <br /> IN-&gt;[ 10] mnPrimaryTransactionQuantity     [-15000] <br /> IN-&gt;[ 11] mnQuantityConvertedToPrimary     [-15000] <br />
<div style="margin-left: 40px; color: red;">ERROR INFO JDEERR - ID= 0, Error= 0252 - b4100030.c, Line= 353</div>
OUT-&gt;[  1] mnTransactionQuantity            [-15000] <br /> OUT-&gt;[  2] mnTransactionUnitCost            [83.020000000000000000] <br /> OUT-&gt;[  3] mnExtendedCost                   [-1260900] <br /> OUT-&gt;[  4] mnPrimaryUnitCost                [0] <br /> OUT-&gt;[  5] mnConversionFactorFromToPrimry   [1] <br /> OUT-&gt;[  6] mnConversionFactorPriceToPrim    [1] <br /> OUT-&gt;[  7] cCurrencyControl                 [N] <br /> OUT-&gt;[  8] mnForeignUnitCost                [83.02] <br /> OUT-&gt;[  9] mnForeignExtendedCost            [.00] <br /> OUT-&gt;[ 10] mnPrimaryTransactionQuantity     [-15000] <br /> OUT-&gt;[ 11] mnQuantityConvertedToPrimary     [-15000] <br /> Return value is 2 for VerifyQuantityCostExtended. (BSFNLevel = 4)</div>
</div>
</div>
<p> </p>
<div class="kmnotebox">Note:<br />
<ul>
<li>For easier reading, some parameters are missing from the above example</li>
<li>When hitting error, capture the callobject kernel log</li>
<li>Check available Bugs and ESUs based on the callstack above. For this example, check bugs against the objects N4900780 (LoadConfirmEditLine) and XT4111Z1 (F4111EditLine)</li>
<li>For this example, 3 parameters (mnTransactionQuantity, mnTransactionUnitCost, mnExtendedCost) are specified so validation routine Case 1 takes effect</li>
<ul>
<li>1. mnTransactionUnitCost / mnConversionFactorFromToPrimary) * mnPrimaryTransactionQuantity = mnExtendedCost (FALSE)</li>
<li>2. mnExtendedCost / mnPrimaryTransactionQuantity = mnTransactionUnitcost / mnConversionFactorFromToPrimary</li>
</ul>
</ul>
</div>
<p> </p>
<p><br /> <br /> <span style="font-weight: bold;">Example 2:</span><br /> In moving routing steps to stock through P43250 (Receipt Routing Movement and Disposition) the amount computed is different from P4312 (PO Receipts). How to debug this?<br /> 1. To debug issue trace callobject kernel for both P4312 and P43250<br /> 2. Analyze CallStack through Performance workbench</p>
<div style="margin-left: 80px;"><span style="text-decoration: underline;">P4312 -  PO Receipts</span><br />     |--- XT4312Z2 - F4312EditLine (F43121 Edit Line)<br />         |--- B4002000 - ComputeUnitOrExtendedAmount (Orders, calculate Unit or Extended Amount) <span style="color: #3333ff; font-style: italic;">** ORCL: this can be called multiple times **</span> <br />         |--- B4100030 - VerifyQuantityCostExtended (Inventory Trn, Verify Unit Cost vs Extended) <br /> <br /> <span style="text-decoration: underline;">P43250 - Receipt Routing Movement and Disposition</span><br />     |--- NXT43092 - F43092EditLine (F43092 Edit Line)<br />         |--- XT4312Z2 - F4312EditLine (F43121 Edit Line)<br />             |--- B4002000 - ComputeUnitOrExtendedAmount (Orders, calculate Unit or Extended Amount) <span style="font-style: italic; color: #3333ff;">** ORCL: this can be called multiple times ** </span><br />             |--- B4100030 - VerifyQuantityCostExtended (Inventory Trn, Verify Unit Cost vs Extended)</div>
<p> </p>
<div class="kmnotebox">
<p>Note:</p>
<ul>
<li>Both applications are calling VerifyQuantityCostExtended from F4312EditLine</li>
<li>But P43250 calls F4312EditLine through F43092EditLine whereas P4312 calls F4312EditLine directly</li>
<li>So it is important to check the routine call F4312EditLine one from P4312 and the other from NXT43092</li>
</ul>
</div>
<p> </p>
<p><br /> 3. Analyze Detail Routine:<br /> <span style="font-weight: bold; text-decoration: underline;">P4312 - PO Receipts</span></p>
<div style="margin-left: 40px;">Calling Business function F4312EditLine from Level 1 for JDE. Application Name [P4312], Version [ZJDE0001] (BSFNLevel = 1) <br /> ...<br /> IN-&gt;[ 16] mnQuantityReceived               [3277] <br /> IN-&gt;[ 17] szReceiptUOM                     [EA] <br /> IN-&gt;[ 18] mnUnitCostReceived               [904.2346] <br /> IN-&gt;[ 19] mnForeignUnitCostReceived        [0]  <span style="font-style: italic; color: #3333ff;">*** ORCL: Note that mnForeignUnitCostReceived is not assigned through P4312 ***</span><br /> IN-&gt;[ 20] <span style="font-style: italic; color: red;">mnAmountReceived                 [2964081] </span><br /> IN-&gt;[ 21] mnForeignAmountReceived          [37858.40] <br /> ...<br />
<div style="margin-left: 40px;">Calling Business function VerifyQuantityCostExtended from F4312EditLine for JDE. Application Name [P4312], Version [ZJDE0001] (BSFNLevel = 2) <br /> IN-&gt;[  1] mnTransactionQuantity            [3277] <br /> IN-&gt;[  2] mnTransactionUnitCost            [11.552761672]  <span style="font-style: italic; color: #3333ff;">*** ORCL: So this value is computed through XT4312Z2 routine ***</span><br /> IN-&gt;[  3] mnExtendedCost                   [37858.4] <br /> IN-&gt;[  4] mnPrimaryUnitCost                [0] <br /> IN-&gt;[  5] mnConversionFactorFromToPrimry   [1] <br /> IN-&gt;[  6] mnConversionFactorPriceToPrim    [1] <br /> IN-&gt;[  7] cCurrencyControl                 [Y] <br /> IN-&gt;[  8] mnForeignUnitCost                [0] <br /> IN-&gt;[  9] mnForeignExtendedCost            [0] <br /> IN-&gt;[ 10] mnPrimaryTransactionQuantity     [3277] <br /> IN-&gt;[ 11] mnQuantityConvertedToPrimary     [3277] <br /> OUT-&gt;[  1] mnTransactionQuantity            [3277] <br /> OUT-&gt;[  2] mnTransactionUnitCost            [11.552761672] <br /> OUT-&gt;[  3] <span style="font-style: italic; color: red;">mnExtendedCost                   [37858.4] </span><br /> OUT-&gt;[  4] mnPrimaryUnitCost                [11.5528] <br /> OUT-&gt;[  5] mnConversionFactorFromToPrimry   [1] <br /> OUT-&gt;[  6] mnConversionFactorPriceToPrim    [1] <br /> OUT-&gt;[  7] cCurrencyControl                 [Y] <br /> OUT-&gt;[  8] mnForeignUnitCost                [0] <br /> OUT-&gt;[  9] mnForeignExtendedCost            [0] <br /> OUT-&gt;[ 10] mnPrimaryTransactionQuantity     [3277] <br /> OUT-&gt;[ 11] mnQuantityConvertedToPrimary     [3277] <br /> Return value is 0 for VerifyQuantityCostExtended. (BSFNLevel = 2)</div>
</div>
<p><br /> <span style="font-weight: bold; text-decoration: underline;">P43250 - Receipt Routing Movement and Disposition</span></p>
<div style="margin-left: 40px;">Calling Business function F43092EditLine from Level 1 for JDE. Application Name [P43250], Version [ZJDE0001] (BSFNLevel = 1)<br /> ...<br />
<div style="margin-left: 40px;">Calling Business function F4312EditLine from F43092EditLine for JDE. Application Name [P43250], Version [ZJDE0001] (BSFNLevel = 2) <br /> ...<br /> IN-&gt;[ 16] mnQuantityReceived               [3277] <br /> IN-&gt;[ 17] szReceiptUOM                     [EA] <br /> IN-&gt;[ 18] mnUnitCostReceived               [904.2347] <br /> IN-&gt;[ 19] mnForeignUnitCostReceived        [11.5528] <span style="font-style: italic; color: #3333ff;"> *** ORCL: Note that the value is assigned in calling F4312EditLine ***</span><br /> IN-&gt;[ 20] <span style="font-style: italic; color: red;">mnAmountReceived                 [2963177] </span><br /> IN-&gt;[ 21] mnForeignAmountReceived          [37858.40] <br /> ...<br />
<div style="margin-left: 40px;">Calling Business function VerifyQuantityCostExtended from F4312EditLine for JDE. Application Name [P43250], Version [ZJDE0001] (BSFNLevel = 3) <br /> IN-&gt;[  1] mnTransactionQuantity            [3277] <br /> IN-&gt;[  2] mnTransactionUnitCost            [11.5528] <span style="font-style: italic; color: #3333ff;"> *** ORCL: Same amount assigned is used for input parameter ***</span><br /> IN-&gt;[  3] mnExtendedCost                   [37858.40] <br /> IN-&gt;[  4] mnPrimaryUnitCost                [0] <br /> IN-&gt;[  5] mnConversionFactorFromToPrimry   [1] <br /> IN-&gt;[  6] mnConversionFactorPriceToPrim    [1] <br /> IN-&gt;[  7] cCurrencyControl                 [Y] <br /> IN-&gt;[  8] mnForeignUnitCost                [0] <br /> IN-&gt;[  9] mnForeignExtendedCost            [0] <br /> IN-&gt;[ 10] mnPrimaryTransactionQuantity     [3277] <br /> IN-&gt;[ 11] mnQuantityConvertedToPrimary     [3277] <br /> OUT-&gt;[  1] mnTransactionQuantity            [3277] <br /> OUT-&gt;[  2] mnTransactionUnitCost            [11.5528] <br /> OUT-&gt;[  3]<span style="color: red; font-style: italic;"> mnExtendedCost                   [37858.40] </span><br /> OUT-&gt;[  4] mnPrimaryUnitCost                [11.5528] <br /> OUT-&gt;[  5] mnConversionFactorFromToPrimry   [1] <br /> OUT-&gt;[  6] mnConversionFactorPriceToPrim    [1] <br /> OUT-&gt;[  7] cCurrencyControl                 [Y] <br /> OUT-&gt;[  8] mnForeignUnitCost                [0] <br /> OUT-&gt;[  9] mnForeignExtendedCost            [0] <br /> OUT-&gt;[ 10] mnPrimaryTransactionQuantity     [3277] <br /> OUT-&gt;[ 11] mnQuantityConvertedToPrimary     [3277] <br /> Return value is 0 for VerifyQuantityCostExtended. (BSFNLevel = 3)</div>
</div>
</div>
<p> </p>
<div class="kmnotebox">
<p>Note:</p>
<ul>
<li>For this example VerifyQuantityCostExtended does not issue the error but it contributes to computing a wrong extended amount</li>
<li>Above example is to explain the amount (mnExtendedAmountPrimaryUM) difference between P4312 and P43250</li>
<li>In P43250, mnExtendedAmountPrimaryUM [2963186.9429] = mnQuantityTransactionUM  [3277] ) * (mnUnitPricePricingUM  [904.2377])} (which is domestic unit cost based on 11.5528 (=11.5528 * 78.2700000)</li>
<li>Expected result: P43250 should not recompute the domestic amount (this can be done by not sending 19th parameter mnForeignUnitCostReceived</li>
<li>To debug it, capture the callobject kernel log and compare the event rules for the objects which call F4312EditLine</li>
</ul>
</div>
<p> </p>
<p style="font-weight: bold;">Example 3:</p>
<p>EDI Inbound 861- Receiving Advice (R47071) and PO Receipts (P4312) behavior differently in specifying F47072.FUC (Amount - Foreign Unit Cost). The former fails to reset Foreign Unit Cost and Amount whereas the latter is able to set valid outcome. Note that depending on the processing option for parameter <span id="form1:panelPage1">17. Price At Receipt (with Available values Blank = Do not price at receipt, 1 = Price at receipt) in Process tab, the outcome can be vary. For detail, refer to Bug 17233239 - FAP&amp;FREC NOT UPDATED BY FOREIGN PRICE CHANGE.<br /> </span></p>
<p style="text-decoration: underline;"><span id="form1:panelPage1">Case (Price at Receipt is ON)</span></p>
<p><span id="form1:panelPage1">R47071 (</span>EDI Inbound 861- Receiving Advice)<br /> <span id="form1:panelPage1">---| F4312EditLine (XT4312Z1/XT4312Z2)<br /> ------| ...<br /> ------| <span style="color: #000099; font-weight: bold;">CalculateReceiptPrice (B4500251 - Calculate Receipt Price)</span><br /> ------| VerifyQuantityCostExtended </span></p>
<p><br /> <span id="form1:panelPage1"></span></p>
<p style="text-decoration: underline;"><span id="form1:panelPage1">Case (Price at Receipt is OFF)</span></p>
<p><span id="form1:panelPage1">R47071 (</span>EDI Inbound 861- Receiving Advice)<br /> <span id="form1:panelPage1">---| F4312EditLine (XT4312Z1/XT4312Z2)<br /> ------| ...<br /> ------| <span style="color: #000099; font-weight: bold;"></span> VerifyQuantityCostExtended <br /> </span></p>
<div class="kmnotebox">Note: The business function B4500251 serves as an interface function for Receipts as well as for the settlement, Grower and contract modules. When called for any other module other than receipts i.e when a transaction does not exist, then the Price engine B4500250 is called in a price only mode.Also for these other modules other than receipt the processing mode used by B4500250 and B4500050 will be a 'P' for procurement.</div>
<p><span id="form1:panelPage1"> <span class="awizEndDelimiter"> </span><br /></span></p>
<p>Business scenario,</p>
<p>The foreign unit cost during PO entry was  14.9999 and F47072.FUC is updated with value 15.0960.<br /> <span id="form1:panelPage1"></span></p>
<p style="margin-left: 40px;">Calling Business function F4312EditLine from Level 1 for USERID. Application Name [R47071], Version [ZJDE0001] (BSFNLevel = 1) <br /> ...<br /> IN-&gt;[ 16] mnQuantityReceived               [2500] <br /> IN-&gt;[ 17] szReceiptUOM                     [EA] <br /> IN-&gt;[ 18] mnUnitCostReceived               [1262.6294] <br /> IN-&gt;[ 19] <span style="color: red;">mnForeignUnitCostReceived        [14.9999]  </span>*** both R47071 and P4312 sets same value for this parameter ***<br /> IN-&gt;[ 20] mnAmountReceived                 [.] <br /> IN-&gt;[ 21] <span style="color: red;">mnForeignAmountReceived          [37740.00]  </span><br /> ...<br /> IN-&gt;[ 42] mnExchangeRate                   [83.6400000] <br /> ...</p>
<p style="margin-left: 40px;">         Calling Business function VerifyQuantityCostExtended from F4312EditLine for USERID. Application Name [R47071], Version [ZJDE0001] (BSFNLevel = 2)</p>
<div style="margin-left: 80px;">IN-&gt;[  1] mnTransactionQuantity            [2500] <br /> IN-&gt;[  2] <span style="color: red;">mnTransactionUnitCost            [14.9999]  </span>*** this value has to be written as 15.0960 which is actual foreign unit cost for receipt ***<br /> IN-&gt;[  3] <span style="color: red;">mnExtendedCost                   [37740.00]</span> <br /> IN-&gt;[  4] mnPrimaryUnitCost                [0] <br /> IN-&gt;[  5] mnConversionFactorFromToPrimry   [1] <br /> IN-&gt;[  6] mnConversionFactorPriceToPrim    [1] <br /> IN-&gt;[  7] cCurrencyControl                 [Y] <br /> IN-&gt;[  8] mnForeignUnitCost                [0] <br /> IN-&gt;[  9] mnForeignExtendedCost            [0] <br /> IN-&gt;[ 10] mnPrimaryTransactionQuantity     [2500] <br /> IN-&gt;[ 11] mnQuantityConvertedToPrimary     [2500] <br />     ERROR INFO JDEERR - ID= 8, Error= 0252 - b4100030.c, Line= 353 <br /> OUT-&gt;[  1] mnTransactionQuantity            [2500] <br /> OUT-&gt;[  2] mnTransactionUnitCost            [14.9999] <br /> OUT-&gt;[  3] mnExtendedCost                   [37740.00] <br /> OUT-&gt;[  4] mnPrimaryUnitCost                [0] <br /> OUT-&gt;[  5] mnConversionFactorFromToPrimry   [1] <br /> OUT-&gt;[  6] mnConversionFactorPriceToPrim    [1] <br /> OUT-&gt;[  7] cCurrencyControl                 [Y] <br /> OUT-&gt;[  8] mnForeignUnitCost                [0] <br /> OUT-&gt;[  9] mnForeignExtendedCost            [0] <br /> OUT-&gt;[ 10] mnPrimaryTransactionQuantity     [2500] <br /> OUT-&gt;[ 11] mnQuantityConvertedToPrimary     [2500] <br /> Return value is 2 for VerifyQuantityCostExtended. (BSFNLevel = 2)</div>
<p style="margin-left: 40px;"> </p>
<div class="kmnotebox">
<p>Note:</p>
<ul>
<li>This process is to validate foreign amount</li>
<li>Validation: mnExtendedCost = mnTransactionQuantity * mnTransactionUnitCost = 2500 * 14.9999 = 37499.75 (so mnExtendedCost 37740 is different from 37499.75) so error code '0252' has to be issued</li>
<li>To avoid error and update correct foreign amount buckets, mnTransactionUnitCost has to be handed over from user overridden value</li>
</ul>
</div>
<p> <span class="awizEndDelimiter"> </span></p>
<hr />
<p><br /> &lt;Internal_Only&gt; Additional Case study is to be implemented along the way&lt;/Internal_Only&gt;</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>



<!-- ======================================== End of Body ==================================== -->

  <footer class="panel-footer">
    <div class="container">
      <div class="row">
        <section id="pagebottom" class="pagebottom">
          <!-- <p>"Click Top button to go back to the top"</p> -->
          <button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
          <form>
            <input type="button" value="Go back!" onclick="history.back()">
          </form>
        </section>
      </div>
      <div class="text-center">&copy; Copyright Dong's Page 2019</div>
    </div>
  </footer>

  <!-- jQuery (Bootstrap JS plugins depend on it) -->
  <script src="../js/jquery-2.1.4.min.js"></script>
  <script src="../js/bootstrap.min.js"></script>
  <script src="../js/script.js"></script>
</body>
</html>
