<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Certain Users Receive Error 084M & 2067 When Trying to Add Item Branch Record from Item Master - CASE STUDY</title>
<!--     <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/styles.css"> -->
    <link href='https://fonts.googleapis.com/css?family=Oxygen:400,300,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Lora' rel='stylesheet' type='text/css'>

    <style>
      body {
        font-family: "Segoe UI", Calibri, Arial, Helvetica, sans-serif;
/*        background-color: #FFFAFA;*/
/*        font-size: 14px;*/
      }

      #myBtn {
        display: none;
        position: fixed;
        bottom: 20px;
        right: 30px;
        z-index: 99;
        font-size: 18px;*/
        border: none;
        outline: none;
        background-color: #2F4F4F;
        color: white;
        cursor: pointer;
        padding: 15px;
        border-radius: 4px;
      }

      #myBtn:hover {
        background-color: #555;
      }
        .kmnotebox {
        background-color: #FFFFE0;
        border-left: 10px;
        /*border-style: dotted;*/
      }

      .kmcodeblock {
        background-color: #B0E0E6;
        border-left: 10px;
        /*border-style: dotted;*/
      }

      
    </style>

  </head>


<body>
  <header>
    <nav id="header-nav" class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <a href="index.html" class="pull-left visible-md visible-lg">
            <div id="logo-img"></div>
          </a>

          <div class="navbar-brand">
            <a href="../index.html"><h1>Home Page!</h1></a>
          </div>

<!--           <form>
            <input type="button" value="Go back!" onclick="history.back()">
          </form> -->

        </div>

      </div><!-- .container -->
    </nav><!-- #header-nav -->
  </header>

<button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>

<div style="background-color:#2F4F4F;color:white;padding:0px"><h1>Certain Users Receive Error 084M & 2067 When Trying to Add Item Branch Record from Item Master - CASE STUDY</h1></div>
<!-- <div style="background-color:lightgrey;padding:30px 30px 2500px">This example demonstrates how to create a "scroll to top" button that becomes visible when the user starts to scroll the page.</div> -->

<script>
// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    document.getElementById("myBtn").style.display = "block";
  } else {
    document.getElementById("myBtn").style.display = "none";
  }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>

</body>


<!-- <h1 class="km"><big><big><a name="subtitle"></a><span style="font-size: large;"><BIG>Caching in EnterpriseOne</BIG></big></big></h1> -->
<!-- ================================= Purpose of Document ================================== -->

<h2 class="km"><big><big><a name="section01"></a><span style="font-size: medium;"><BIG>Purpose of Document</BIG></big></big></h2>

  <h3>Table of Contents</h3>
  <ul>
    <li><a href="#error">Error Detail</a></li>
    <li><a href="#cause">Cause and Solution</a></li>
  </ul>

<p>This document is a case study only and same shall not encompass possible cause and resolution. This document can be useful only when the issue is user specific and issue is caused by corrupted data or database cache. </p>
<p>P41026 issues errors, </p>
<h3><a name="error"></a>Error Detail</h3>
<p>Error&nbsp;&nbsp;&nbsp; <span style="text-decoration: underline;">Branch/Plant M30 Invalid Warning</span><br /><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A form level error has occurred.</em><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CAUSE: Branch/Plant M30 is not set up in the Constants file.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RESOLUTION: Set up Branch/Plant in the Constants file.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em><strong>ER Details:</strong></em><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Form P41026_W41026A<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Control Id 162<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Control Title GetItemMasterInfo<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Event Button clicked<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Line No 36<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em><strong>BSFN Details:</strong></em><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Source File b4101390.c<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Source Line 273<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Error ID 084M<br />Error&nbsp;&nbsp;&nbsp; <span style="text-decoration: underline;">Item Number Invalid Warning</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em>A form level error has occurred.</em><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CAUSE. . . . . The Item Number entered does not exist in the Basic Item Master<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (P4101).<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RESOLUTION . . Enter a valid Item number or add the Item to the Basic Item<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Master (P4101).<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em><strong>ER Details:</strong></em><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Form P41026_W41026A<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Control Id 162<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Control Title GetItemMasterInfo<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Event Button clicked<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Line No 36<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BSFN Details:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Source File n4101060.c<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Source Line 33650<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Error ID 0267<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BSFN DSTR Item 11</p>
<p>when adding Item Branch for existing item number using P41026. This issue is a user specific and the copied user based on problematic user ID does not have issue.</p>
<p><img src="../images/it11.png" border="0" alt="The initial screen of P41026" title="The initial screen of P41026" hspace="0" vspace="0" /></p>
<p>This screen shows the item is valid because it does not issue error so the error in below figure is not reflecting actual issue.&nbsp; </p>
<p><img src="../images/it12.png" border="0" alt="Error in P41026" title="Error in P41026" hspace="0" vspace="0" /></p>
<p>Above print screen shows that the Branch and Item both appear to be correct. </p>

<div class="kmnotebox">
<p><em>Note</em>:</p>
<ul>
<li>When you receive more than two errors, try to fix the first error. </li>
<li>When a certain issue is user specific, possible cause come from the settings from user profile (P0092), security settings (P00950), user override (P98950), and default branch and routing (P400951).</li>
<li>In case you do not find any clue from the screen, capture additional log after verifying the source of error (in your clicking yellow triangle), 
<ul>
<li>JASDEBUG.log when issue is coming from specification including event rule without having a specific business function</li>
<li>JDEDEBUG.log majority of error is handled by business function because validation is done through business functions. </li>
</ul>
</li>
<li>So for this case study, jdedebug.log is essential to know the root cause of it.</li>
</ul>
</div>




<h3><a name="cause"></a>Cause and Solution</h3>

<!-- ======================================== Body Starts Here =================================== -->

<p>Issue is caused by corrupted data from F400095 (Default Locations/Printers) which stores the Default Branch which P41026 defaulted in the duplication steps indicated.<br />&nbsp;<br />Based on call object kernel log (namely, jdedebug log which dumps the business functions), <br />
  <div class="kmcodeblock">
    <p>A. The user USER-A has a default branch M30 (this is why the issue is user specific) as below,<br />Calling Business function GetDefaultBranch from Level 1 for USER-A. Application Name [P4101], Version [ZJDE0001] (BSFNLevel = 1)<br />IN-&gt;[ 1] szBranch [ ]<br />IN-&gt;[ 2] szApprovalRouteCode [ ]<br />Entering JDB_FetchKeyed (hRequest 800000000000000000008000B223F7C0) <em>************** This simply indicates F40095 is a member of database cache (F98613) ***************</em><br />Fetched the record (hRequest 800000000000000000008000B223F7C0)<br />OUT-&gt;[ 1] <strong>szBranch [M30]</strong> <em>********** The problem lies here either the data from F40095 is problem or, the cache is corrupted *************</em><br />OUT-&gt;[ 2] szApprovalRouteCode [ ]<br />Return value is 0 for GetDefaultBranch. (BSFNLevel = 1)<br />&nbsp;&nbsp;: Correct representation is OUT-&gt;[ 1] <strong>szBranch [ &nbsp; &nbsp; &nbsp; &nbsp; M30]</strong> <em>**** based on the Display Rule *RAB so '9 spaces and M30, "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; M30" *****</em> <br /><br />B. The value from database cache F4095 is formatted wrongly,<br />Calling Business function VerifyAndGetBranchPlantConstants from F4101ProcessMasterData for USER-A. Application Name [P41026], Version [ZJDE0001] (BSFNLevel = 2)<br />IN-&gt;[ 1] szSystemCode [ ]<br />IN-&gt;[ 2] szBranchPlant [M30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ]<br />IN-&gt;[ 3] cErrorCode []<br />IN-&gt;[ 4] szErrorMessageID []<br />...<br />IN-&gt;[105] cConsignmentBranchFlag []<br />SELECT * FROM PRODDTA9/F41001 WHERE ( CISY = SPACE AND <strong>CIMCU = 'M30'</strong> )<br />No More Data found (hRequest 800000000000000000008000B2288F10) <em>************ In searching data from F41001 which does not return any ***********</em><br />ERROR INFO JDEERR - ID= 0, Error= 084M - /OneWorld/Packages/PD910FA/source/COPBASE/b4101390.c, Line= 273<br />&nbsp;</p>
  </div>




<!-- ======================================== End of Body ==================================== -->

  <footer class="panel-footer">
    <div class="container">
      <div class="row">
        <section id="pagebottom" class="pagebottom">
          <!-- <p>"Click Top button to go back to the top"</p> -->
          <button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
          <form>
            <input type="button" value="Go back!" onclick="history.back()">
          </form>
        </section>
      </div>
      <div class="text-center">&copy; Copyright Dong's Page 2019</div>
    </div>
  </footer>

  <!-- jQuery (Bootstrap JS plugins depend on it) -->
  <script src="../js/jquery-2.1.4.min.js"></script>
  <script src="../js/bootstrap.min.js"></script>
  <script src="../js/script.js"></script>
</body>
</html>
